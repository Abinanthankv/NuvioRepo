/**
 * tamilblasters - Built from src/tamilblasters/
 * Generated: 2026-01-18T06:55:48.425Z
 */
var Q=Object.defineProperty,J=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var O=(n,t,s)=>t in n?Q(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,F=(n,t)=>{for(var s in t||(t={}))V.call(t,s)&&O(n,s,t[s]);if(H)for(var s of H(t))tt.call(t,s)&&O(n,s,t[s]);return n},q=(n,t)=>J(n,Z(t));var v=(n,t,s)=>new Promise((a,h)=>{var d=e=>{try{b(s.next(e))}catch(y){h(y)}},o=e=>{try{b(s.throw(e))}catch(y){h(y)}},b=e=>e.done?a(e.value):Promise.resolve(e.value).then(d,o);b((s=s.apply(n,t)).next())});var B=require("cheerio-without-node-native"),et="1b3113663c9004682ed61086cf967c44",st="https://api.themoviedb.org/3",W="https://1tamilblasters.bz",k={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0",Referer:`${W}/`,Accept:"*/*","Accept-Language":"en-US,en;q=0.9","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"};function R(a){return v(this,arguments,function*(n,t={},s=1e4){let h=new AbortController,d=setTimeout(()=>h.abort(),s);try{let o=yield fetch(n,q(F({},t),{signal:h.signal}));return clearTimeout(d),o}catch(o){throw clearTimeout(d),o}})}function nt(s){return v(this,arguments,function*(n,t={}){try{let a=yield R(n,{method:"GET",headers:t},5e3);return a.ok||a.status===206}catch(a){return!1}})}function at(n){try{return typeof atob!="undefined"?atob(n.trim()):Buffer.from(n.trim(),"base64").toString("binary")}catch(t){return null}}function rt(n,t,s,a){for(;s--;)a[s]&&(n=n.replace(new RegExp("\\b"+s.toString(t)+"\\b","g"),a[s]));return n}function X(n){return(n||"").toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}function C(n,t){let s=X(n),a=X(t);if(s===a)return 1;if(s.includes(a)||a.includes(s))return .9;let h=new Set(s.split(/\s+/).filter(e=>e.length>2)),d=new Set(a.split(/\s+/).filter(e=>e.length>2));if(h.size===0||d.size===0)return 0;let o=new Set([...h].filter(e=>d.has(e))),b=new Set([...h,...d]);return o.size/b.size}var N=class{static extract(t,s=0){return v(this,null,function*(){if(s>2)return null;try{let h=yield(yield R(t,{headers:q(F({},k),{Referer:W})},5e3)).text(),d=new URL(t).origin,o=h.match(new RegExp("eval\\(function\\(p,a,c,k,e,d\\)\\{.*?\\}\\s*\\((.*)\\)\\s*\\)","s"));if(o){let r=o[1].trim().match(new RegExp("^'(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"));r&&(h+=`
`+rt(r[1],parseInt(r[2]),parseInt(r[3]),r[4].split("|")))}let b=[/["']hls[2-4]["']\s*:\s*["']([^"']+)["']/gi,/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/gi,/https?:\/\/[^\s"']+\.m3u8[^\s"']*/gi,/["'](\/[^\s"']+\.m3u8[^\s"']*)["']/gi,/["']?file["']?\s*:\s*["']([^"']+)["']/gi],e=[];for(let r of b){let l=h.match(r);l&&l.forEach($=>{let T=$.replace(/^.*?["']/,"").replace(/["'].*$/,"");T.startsWith("/")&&!T.startsWith("//")&&(T=d+T),(T.includes(".m3u8")||T.includes(".mp4"))&&e.push(T)})}let y=h.match(/[A-Za-z0-9+/]{24,}=*/g);if(y&&y.forEach(r=>{let l=at(r);l&&(l.includes(".m3u8")||l.startsWith("http"))&&e.push(l)}),e.length>0){e.sort((l,$)=>($.includes("?")?1:0)-(l.includes("?")?1:0)||$.length-l.length);let r=e[0];return console.log(`[Tamilblasters] Winner Discovered: ${r}`),yield this.resolveManifest(r,t)}let D=h.matchAll(/href\s*=\s*["'](https?:\/\/[^"']*\/(?:stream|file|d|v|e)\/[^"']+)["']/gi);for(let r of D){console.log(`[Tamilblasters] Following Discovery Jump: ${r[1]}`);let l=yield this.extract(r[1],s+1);if(l)return l}return null}catch(a){return null}})}static resolveManifest(t,s){return v(this,null,function*(){try{let a=new URL(s).origin+"/",d=yield(yield R(t,{headers:q(F({},k),{Referer:a})},5e3)).text(),o=[],b=[],e=new URL(t).search,y=d.matchAll(/#EXT-X-MEDIA:TYPE=AUDIO.*?NAME="([^"]+)"/g);for(let r of y)b.includes(r[1])||b.push(r[1]);let D=d.matchAll(/#EXT-X-STREAM-INF:.*?RESOLUTION=\d+x(\d+).*?\n(.*)/gi);for(let r of D){let l=r[2].trim();l.startsWith("http")||(l=t.substring(0,t.lastIndexOf("/")+1)+l),e&&!l.includes("?")&&(l+=e),o.push({url:l,quality:this.heightToQuality(r[1])})}return{url:(o.length>0,t),quality:o.length>0?o[0].quality:"Unknown",audios:b,referer:a,origin:new URL(a).origin}}catch(a){return null}})}static heightToQuality(t){return t=parseInt(t),t>=2160?"4K":t>=1080?"1080p":t>=720?"720p":t>=480?"480p":t+"p"}};function Y(h,d){return v(this,arguments,function*(n,t,s=s,a=a){t==="movie"&&(s=null,a=null);let o=/^\d+$/.test(n),b=o?null:n;console.log(`[Tamilblasters] \u{1F680} Starting High-Speed Fetch for ${t}: ${n}`);try{let e;if(o){let f=0;for(;f<3;)try{let u=yield R(`${st}/${t==="movie"?"movie":"tv"}/${n}?api_key=${et}`);if(!u.ok)throw new Error(`HTTP ${u.status}`);let i=yield u.json();e={title:i.title||i.name,year:(i.release_date||i.first_air_date||"").split("-")[0]},console.log(`[Tamilblasters] TMDB Resolved: ${e.title} (${e.year})`);break}catch(u){f++,console.log(`[Tamilblasters] TMDB Attempt ${f} failed: ${u.message}`),f<3&&(yield new Promise(i=>setTimeout(i,1e3)))}e||(console.log("[Tamilblasters] TMDB Failed after 3 attempts, falling back."),e={title:n,year:null})}else e={title:n,year:null};let y=`${W}/index.php?/search/&q=${encodeURIComponent(e.title)}&quick=1`,r=yield(yield R(y,{headers:k})).text(),l=B.load(r),$=[];if(l(".ipsStreamItem_title a").each((f,u)=>{let i=l(u);i.length&&$.push({title:i.text().trim(),href:i.attr("href")})}),$.length===0&&o){console.log("[Tamilblasters] 0 results for title, trying numeric search...");let u=yield(yield R(`${W}/index.php?/search/&q=${n}&quick=1`,{headers:k})).text(),i=B.load(u);i(".ipsStreamItem_title a").each((M,S)=>{let A=i(S);A.length&&$.push({title:A.text().trim(),href:A.attr("href")})})}console.log(`[Tamilblasters] Found ${$.length} search results`);let T=$.filter(f=>{let u=C(e.title,f.title),i=!e.year||t==="tv"||f.title.includes(e.year);return console.log(`[Tamilblasters] Candidate Match: "${f.title}" (Score: ${u.toFixed(2)}, YearMatch: ${i})`),u>.4&&i}).sort((f,u)=>{let i=f.title.toLowerCase().includes("watch online")?1:0,M=u.title.toLowerCase().includes("watch online")?1:0;return i!==M?M-i:C(e.title,u.title)-C(e.title,f.title)}).slice(0,8);if(T.length===0)return[];let _=[],G=30;return yield Promise.all(T.map(f=>v(this,null,function*(){try{let i=yield(yield R(f.href,{headers:k})).text(),M=B.load(i),S=M("h1.entry-title").text().trim()||f.title,A=S.match(/\(?(\d{4})\)?/),K=A?A[1]:e.year||"N/A",U=[];M("iframe").each((m,L)=>{let I=M(L).attr("src");if(!I||I.includes("google")||I.includes("youtube"))return;let E=`Stream ${m+1}`,g=M(L);for(let P=0;P<5;P++){let x=g.prev();if(x.length===0){if(g=g.parent(),!g.length||g.is("body"))break;continue}let p=x.text().trim();if(p.toLowerCase().includes("episode")||p.match(/EP\d+/i)||p.match(/\(\d+-\d+\)/)){E=p;break}g=x}console.log(`[Tamilblasters] Found Embed: ${I.substring(0,30)}... (Label: ${E})`),U.push({url:I,label:E})}),yield Promise.all(U.map(m=>v(this,null,function*(){if(_.length>=G)return;let L=m.label.match(/S(\d+)/i)||m.label.match(/Season\s*(\d+)/i),I=m.label.match(/E(\d+)/i)||m.label.match(/Episode\s*(\d+)/i)||m.label.match(/EP\s*(\d+)/i)||m.label.match(/–\s*(\d+)/),E=L?parseInt(L[1]):null,g=I?parseInt(I[1]):null;if(E===null){let c=S.match(/S(\d+)/i)||S.match(/Season\s*(\d+)/i);c&&(E=parseInt(c[1]))}if(g===null){let c=S.match(/E(\d+)/i)||S.match(/Episode\s*(\d+)/i)||S.match(/EP\s*(\d+)/i);c&&(g=parseInt(c[1]))}if(s!==null&&E!==null&&E!==s)return;if(a!==null){if(g!==null&&g!==a){let c=m.label.match(/(\d+)-(\d+)/);if(c){let w=parseInt(c[1]),z=parseInt(c[2]);if(a<w||a>z)return}else return}if(g===null){let c=S.match(/EP\((\d+)-(\d+)\)/)||S.match(/\((\d+)-(\d+)\)/);if(c){let w=parseInt(c[1]),z=parseInt(c[2]);if(a<w||a>z)return}}}let P=E!==null?E:s,x=g!==null?g:a,p=yield N.extract(m.url);if(!p)return;let j=q(F({},k),{Referer:p.referer,Origin:p.origin});if(yield nt(p.url,j)){let c=e.title;if(t==="tv"){let w=m.label.replace(/^(?:Episode|EP|S\d+E\d+)\s*\d*\s*[–-]?\s*/i,"").trim();P!==null&&x!==null?(c+=` - S${P} E${x}`,w&&w!==m.label&&w.length>0&&(c+=` - ${w}`)):x!==null?(c+=` - Episode ${x}`,w&&w!==m.label&&w.length>0&&(c+=` - ${w}`)):c+=` - ${m.label}`}_.push({name:"Tamilblasters",title:`Tamilblasters (Instant) (${p.quality})
\u{1F4FC}: ${c} (${K})
\u{1F310}: ${p.audios.join(" / ")||"TAMIL"}`,url:p.url,quality:p.quality,headers:j,provider:"Tamilblasters"})}})))}catch(u){}}))),console.log(`[Tamilblasters] \u2728 Completed. Found ${_.length} playable streams.`),_}catch(e){return console.error(`[Tamilblasters] Fatal Error: ${e.message}`),[]}})}typeof module!="undefined"&&module.exports?module.exports={getStreams:Y}:global.getStreams={getStreams:Y};
