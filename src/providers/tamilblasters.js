/**
 * tamilblasters - Built from src/tamilblasters/
 * Generated: 2026-01-18T09:51:23.737Z
 */
var j=Object.defineProperty,H=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var z=(s,t,e)=>t in s?j(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,v=(s,t)=>{for(var e in t||(t={}))X.call(t,e)&&z(s,e,t[e]);if(P)for(var e of P(t))G.call(t,e)&&z(s,e,t[e]);return s},A=(s,t)=>H(s,K(t));var $=(s,t,e)=>new Promise((o,i)=>{var h=l=>{try{f(e.next(l))}catch(u){i(u)}},a=l=>{try{f(e.throw(l))}catch(u){i(u)}},f=l=>l.done?o(l.value):Promise.resolve(l.value).then(h,a);f((e=e.apply(s,t)).next())});var F=require("cheerio-without-node-native"),Q="1b3113663c9004682ed61086cf967c44",J="https://api.themoviedb.org/3",D="https://1tamilblasters.bz",x={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0",Referer:`${D}/`,Accept:"*/*","Accept-Language":"en-US,en;q=0.9","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"};function M(o){return $(this,arguments,function*(s,t={},e=1e4){let i=new AbortController,h=setTimeout(()=>i.abort(),e);try{let a=yield fetch(s,A(v({},t),{signal:i.signal}));return clearTimeout(h),a}catch(a){throw clearTimeout(h),a}})}function V(e){return $(this,arguments,function*(s,t={}){try{let o=yield M(s,{method:"GET",headers:t},5e3);return o.ok||o.status===206}catch(o){return!1}})}function Z(s){try{return typeof atob!="undefined"?atob(s.trim()):Buffer.from(s.trim(),"base64").toString("binary")}catch(t){return null}}function tt(s,t,e,o){for(;e--;)o[e]&&(s=s.replace(new RegExp("\\b"+e.toString(t)+"\\b","g"),o[e]));return s}function q(s){return(s||"").toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}function W(s,t){let e=q(s),o=q(t);if(e===o)return 1;if(e.includes(o)||o.includes(e))return .9;let i=new Set(e.split(/\s+/).filter(l=>l.length>2)),h=new Set(o.split(/\s+/).filter(l=>l.length>2));if(i.size===0||h.size===0)return 0;let a=new Set([...i].filter(l=>h.has(l))),f=new Set([...i,...h]);return a.size/f.size}function et(s,t){let{title:e,year:o}=s,{quality:i,type:h,size:a,language:f,seasonCode:l,episodeCode:u,label:d,audioInfo:n}=t,r=o||t.matchYear,c=r?` (${r})`:"",m=!!(l||u),p=`\u{1F4FC}: ${e}${c}`;m?(p+=` - ${l||"S01"} ${u||""}`,d&&!d.toLowerCase().includes("stream")&&!d.includes(u)&&(p+=` (${d})`)):d&&!d.toLowerCase().includes("stream")&&(p+=` (${d})`),p+=` - ${i!=="Unknown"?i:""}`;let k=h&&h!=="UNKNOWN"?`\u{1F4FA}: ${h}
`:"",U=a&&a!=="UNKNOWN"?`\u{1F4BE}: ${a} | \u{1F69C}: tamilblasters
`:"",R=f||"TAMIL";return n&&(R=n),`Tamilblasters (Instant) (${i})
${k}${p}
${U}\u{1F310}: ${R.toUpperCase()}`}var N=class{static extract(t,e=0){return $(this,null,function*(){if(e>2)return null;try{let i=yield(yield M(t,{headers:A(v({},x),{Referer:D})},5e3)).text(),h=new URL(t).origin,a=i.match(new RegExp("eval\\(function\\(p,a,c,k,e,d\\)\\{.*?\\}\\s*\\((.*)\\)\\s*\\)","s"));if(a){let n=a[1].trim().match(new RegExp("^'(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"));n&&(i+=`
`+tt(n[1],parseInt(n[2]),parseInt(n[3]),n[4].split("|")))}let f=[/["']hls[2-4]["']\s*:\s*["']([^"']+)["']/gi,/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/gi,/https?:\/\/[^\s"']+\.m3u8[^\s"']*/gi,/["'](\/[^\s"']+\.m3u8[^\s"']*)["']/gi,/["']?file["']?\s*:\s*["']([^"']+)["']/gi],l=[];for(let n of f){let r=i.match(n);r&&r.forEach(c=>{let m=c.replace(/^.*?["']/,"").replace(/["'].*$/,"");m.startsWith("/")&&!m.startsWith("//")&&(m=h+m),(m.includes(".m3u8")||m.includes(".mp4"))&&l.push(m)})}let u=i.match(/[A-Za-z0-9+/]{24,}=*/g);if(u&&u.forEach(n=>{let r=Z(n);r&&(r.includes(".m3u8")||r.startsWith("http"))&&l.push(r)}),l.length>0){l.sort((r,c)=>(c.includes("?")?1:0)-(r.includes("?")?1:0)||c.length-r.length);let n=l[0];return console.log(`[Tamilblasters] Winner Discovered: ${n}`),yield this.resolveManifest(n,t)}let d=i.matchAll(/href\s*=\s*["'](https?:\/\/[^"']*\/(?:stream|file|d|v|e)\/[^"']+)["']/gi);for(let n of d){console.log(`[Tamilblasters] Following Discovery Jump: ${n[1]}`);let r=yield this.extract(n[1],e+1);if(r)return r}return null}catch(o){return null}})}static resolveManifest(t,e){return $(this,null,function*(){var o;try{let i=new URL(e).origin+"/",a=yield(yield M(t,{headers:A(v({},x),{Referer:i})},5e3)).text(),f=[],l=[],u=new URL(t).search,d=a.matchAll(/#EXT-X-MEDIA:TYPE=AUDIO.*?NAME="([^"]+)"/g);for(let r of d)l.includes(r[1])||l.push(r[1]);let n=a.matchAll(/#EXT-X-STREAM-INF:.*?RESOLUTION=\d+x(\d+).*?\n(.*)/gi);for(let r of n){let c=r[2].trim();c.startsWith("http")||(c=t.substring(0,t.lastIndexOf("/")+1)+c),u&&!c.includes("?")&&(c+=u),f.push({url:c,quality:this.heightToQuality(r[1])})}return{url:(f.length>0,t),quality:f.length>0?f[0].quality:((o=a.match(/\b(2160|1080|720|480)p?\b/i))==null?void 0:o[0])||"Unknown",audios:l,referer:i,origin:new URL(i).origin}}catch(i){return null}})}static heightToQuality(t){return t=parseInt(t),t>=2160?"4K":t>=1080?"1080p":t>=720?"720p":t>=480?"480p":t+"p"}};function C(s){return $(this,null,function*(){console.log(`[Tamilblasters] Searching for: ${s}`);try{let t=`${D}/index.php?/search/&q=${encodeURIComponent(s)}&quick=1`,o=yield(yield M(t,{headers:x})).text(),i=F.load(o),h=[];return i(".ipsStreamItem_title a").each((a,f)=>{let l=i(f),u=l.attr("href");u&&u.includes("/forums/topic/")&&h.push({title:l.text().trim(),href:u})}),h}catch(t){return console.error(`[Tamilblasters] Search error: ${t.message}`),[]}})}function _(s,t="movie",e=null,o=null){return $(this,null,function*(){let i=t==="tv"||t==="tvshow"?"tv":"movie",h=/^\d+$/.test(String(s));console.log(`[Tamilblasters] \u{1F680} Starting High-Speed Fetch for ${i}: ${s}`);try{let a={title:String(s),year:null};if(h){let n=0;for(;n<3;)try{let r=yield M(`${J}/${i}/${s}?api_key=${Q}`);if(!r.ok)throw new Error(`HTTP ${r.status}`);let c=yield r.json();a={title:c.title||c.name,year:(c.release_date||c.first_air_date||"").split("-")[0]},console.log(`[Tamilblasters] TMDB Resolved: ${a.title} (${a.year})`);break}catch(r){n++,console.log(`[Tamilblasters] TMDB Attempt ${n} failed: ${r.message}`),n<3&&(yield new Promise(c=>setTimeout(c,1e3)))}}let f=yield C(a.title);f.length===0&&h&&(f=yield C(s));let l=f.filter(n=>{let r=W(a.title,n.title),c=!a.year||i==="tv"||n.title.includes(a.year);return r>.4&&c}).sort((n,r)=>{let c=n.title.toLowerCase().includes("watch online")?1:0,m=r.title.toLowerCase().includes("watch online")?1:0;return c!==m?m-c:W(a.title,r.title)-W(a.title,n.title)}).slice(0,5);if(l.length===0)return[];let u=[],d=10;for(let n of l){if(u.length>=d)break;try{let c=yield(yield M(n.href,{headers:x})).text(),m=F.load(c),p=m("h1.ipsType_pageTitle").text().trim()||m("h1.entry-title").text().trim()||n.title,k=p.match(/\(?(\d{4})\)?/),U=k?k[1]:a.year||"N/A",R=[];m("iframe").each((w,L)=>{let T=m(L).attr("src");if(!T||T.includes("google")||T.includes("youtube"))return;let S=`Stream ${w+1}`,g=m(L);for(let y=0;y<5;y++){let E=g.prev();if(E.length===0){if(g=g.parent(),!g.length||g.is("body"))break;continue}let I=E.text().trim();if(I.toLowerCase().includes("episode")||I.match(/EP\d+/i)||I.match(/\(\d+-\d+\)/)){S=I;break}g=E}R.push({url:T,label:S})}),yield Promise.all(R.map(w=>$(this,null,function*(){var B;if(u.length>=d)return;let L=w.label.match(/S(\d+)/i)||w.label.match(/Season\s*(\d+)/i),T=w.label.match(/E(\d+)/i)||w.label.match(/Episode\s*(\d+)/i)||w.label.match(/EP\s*(\d+)/i)||w.label.match(/â€“\s*(\d+)/),S=L?parseInt(L[1]):null,g=T?parseInt(T[1]):null;if(S===null){let b=p.match(/S(\d+)/i)||p.match(/Season\s*(\d+)/i);b&&(S=parseInt(b[1]))}if(g===null){let b=p.match(/E(\d+)/i)||p.match(/Episode\s*(\d+)/i)||p.match(/EP\s*(\d+)/i);b&&(g=parseInt(b[1]))}if(i==="tv"){if(e!==null&&S!==null&&S!==e)return;if(o!==null&&g!==null&&g!==o){let b=w.label.match(/(\d+)-(\d+)/)||p.match(/(\d+)-(\d+)/);if(b){let O=parseInt(b[1]),Y=parseInt(b[2]);if(o<O||o>Y)return}else return}}let y=yield N.extract(w.url);if(!y)return;let E=A(v({},x),{Referer:y.referer,Origin:y.origin});if(yield V(y.url,E)){let b={title:a.title,quality:y.quality,type:p.toUpperCase().includes("BLURAY")?"BluRay":p.toUpperCase().includes("WEB-DL")?"WEB-DL":p.toUpperCase().includes("WEBRIP")?"WEBRip":"HDRip",size:(((B=p.match(/(\d+\.?\d*\s*[mMgG][bB])/))==null?void 0:B[1])||"UNKNOWN").toUpperCase(),language:y.audios.join(" / ")||"TAMIL",seasonCode:S?`S${S.toString().padStart(2,"0")}`:e?`S${e.toString().padStart(2,"0")}`:null,episodeCode:g?`E${g.toString().padStart(2,"0")}`:o?`E${o.toString().padStart(2,"0")}`:null,label:w.label,audioInfo:y.audios.length>0?y.audios.join(", "):"",matchYear:U};u.push({name:"Tamilblasters",title:et(a,b),url:y.url,quality:y.quality,headers:E,provider:"tamilblasters"})}})))}catch(r){console.error(`[Tamilblasters] Error processing match: ${r.message}`)}}return console.log(`[Tamilblasters] Returning ${u.length} streams`),u}catch(a){return console.error(`[Tamilblasters] Fatal Error: ${a.message}`),[]}})}typeof module!="undefined"&&module.exports?module.exports={search:C,getStreams:_}:global.getStreams={search:C,getStreams:_};
