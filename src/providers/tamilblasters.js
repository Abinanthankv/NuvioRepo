/**
 * tamilblasters - Built from src/tamilblasters/
 * Generated: 2026-01-18T07:09:20.215Z
 */
var Y=Object.defineProperty,G=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var j=(s,t,e)=>t in s?Y(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,F=(s,t)=>{for(var e in t||(t={}))Q.call(t,e)&&j(s,e,t[e]);if(U)for(var e of U(t))J.call(t,e)&&j(s,e,t[e]);return s},q=(s,t)=>G(s,K(t));var x=(s,t,e)=>new Promise((n,h)=>{var r=l=>{try{b(e.next(l))}catch($){h($)}},f=l=>{try{b(e.throw(l))}catch($){h($)}},b=l=>l.done?n(l.value):Promise.resolve(l.value).then(r,f);b((e=e.apply(s,t)).next())});var W=require("cheerio-without-node-native"),Z="1b3113663c9004682ed61086cf967c44",V="https://api.themoviedb.org/3",D="https://1tamilblasters.bz",k={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0",Referer:`${D}/`,Accept:"*/*","Accept-Language":"en-US,en;q=0.9","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"};function R(n){return x(this,arguments,function*(s,t={},e=1e4){let h=new AbortController,r=setTimeout(()=>h.abort(),e);try{let f=yield fetch(s,q(F({},t),{signal:h.signal}));return clearTimeout(r),f}catch(f){throw clearTimeout(r),f}})}function tt(e){return x(this,arguments,function*(s,t={}){try{let n=yield R(s,{method:"GET",headers:t},5e3);return n.ok||n.status===206}catch(n){return!1}})}function et(s){try{return typeof atob!="undefined"?atob(s.trim()):Buffer.from(s.trim(),"base64").toString("binary")}catch(t){return null}}function st(s,t,e,n){for(;e--;)n[e]&&(s=s.replace(new RegExp("\\b"+e.toString(t)+"\\b","g"),n[e]));return s}function H(s){return(s||"").toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}function z(s,t){let e=H(s),n=H(t);if(e===n)return 1;if(e.includes(n)||n.includes(e))return .9;let h=new Set(e.split(/\s+/).filter(l=>l.length>2)),r=new Set(n.split(/\s+/).filter(l=>l.length>2));if(h.size===0||r.size===0)return 0;let f=new Set([...h].filter(l=>r.has(l))),b=new Set([...h,...r]);return f.size/b.size}var C=class{static extract(t,e=0){return x(this,null,function*(){if(e>2)return null;try{let h=yield(yield R(t,{headers:q(F({},k),{Referer:D})},5e3)).text(),r=new URL(t).origin,f=h.match(new RegExp("eval\\(function\\(p,a,c,k,e,d\\)\\{.*?\\}\\s*\\((.*)\\)\\s*\\)","s"));if(f){let i=f[1].trim().match(new RegExp("^'(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"));i&&(h+=`
`+st(i[1],parseInt(i[2]),parseInt(i[3]),i[4].split("|")))}let b=[/["']hls[2-4]["']\s*:\s*["']([^"']+)["']/gi,/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/gi,/https?:\/\/[^\s"']+\.m3u8[^\s"']*/gi,/["'](\/[^\s"']+\.m3u8[^\s"']*)["']/gi,/["']?file["']?\s*:\s*["']([^"']+)["']/gi],l=[];for(let i of b){let a=h.match(i);a&&a.forEach(A=>{let c=A.replace(/^.*?["']/,"").replace(/["'].*$/,"");c.startsWith("/")&&!c.startsWith("//")&&(c=r+c),(c.includes(".m3u8")||c.includes(".mp4"))&&l.push(c)})}let $=h.match(/[A-Za-z0-9+/]{24,}=*/g);if($&&$.forEach(i=>{let a=et(i);a&&(a.includes(".m3u8")||a.startsWith("http"))&&l.push(a)}),l.length>0){l.sort((a,A)=>(A.includes("?")?1:0)-(a.includes("?")?1:0)||A.length-a.length);let i=l[0];return console.log(`[Tamilblasters] Winner Discovered: ${i}`),yield this.resolveManifest(i,t)}let S=h.matchAll(/href\s*=\s*["'](https?:\/\/[^"']*\/(?:stream|file|d|v|e)\/[^"']+)["']/gi);for(let i of S){console.log(`[Tamilblasters] Following Discovery Jump: ${i[1]}`);let a=yield this.extract(i[1],e+1);if(a)return a}return null}catch(n){return null}})}static resolveManifest(t,e){return x(this,null,function*(){try{let n=new URL(e).origin+"/",r=yield(yield R(t,{headers:q(F({},k),{Referer:n})},5e3)).text(),f=[],b=[],l=new URL(t).search,$=r.matchAll(/#EXT-X-MEDIA:TYPE=AUDIO.*?NAME="([^"]+)"/g);for(let i of $)b.includes(i[1])||b.push(i[1]);let S=r.matchAll(/#EXT-X-STREAM-INF:.*?RESOLUTION=\d+x(\d+).*?\n(.*)/gi);for(let i of S){let a=i[2].trim();a.startsWith("http")||(a=t.substring(0,t.lastIndexOf("/")+1)+a),l&&!a.includes("?")&&(a+=l),f.push({url:a,quality:this.heightToQuality(i[1])})}return{url:(f.length>0,t),quality:f.length>0?f[0].quality:"Unknown",audios:b,referer:n,origin:new URL(n).origin}}catch(n){return null}})}static heightToQuality(t){return t=parseInt(t),t>=2160?"4K":t>=1080?"1080p":t>=720?"720p":t>=480?"480p":t+"p"}};function O(s,t,e=null,n=null){return x(this,null,function*(){t==="movie"&&(e=null,n=null);let h=/^\d+$/.test(s);console.log(`[Tamilblasters] \u{1F680} Starting High-Speed Fetch for ${t}: ${s}`);try{let r={title:s,year:null};if(h){let c=0;for(;c<3;)try{let m=yield R(`${V}/${t}/${s}?api_key=${Z}`);if(!m.ok)throw new Error(`HTTP ${m.status}`);let o=yield m.json();r={title:o.title||o.name,year:(o.release_date||o.first_air_date||"").split("-")[0]},console.log(`[Tamilblasters] TMDB Resolved: ${r.title} (${r.year})`);break}catch(m){c++,console.log(`[Tamilblasters] TMDB Attempt ${c} failed: ${m.message}`),c<3&&(yield new Promise(o=>setTimeout(o,1e3)))}}let f=`${D}/index.php?/search/&q=${encodeURIComponent(r.title)}&quick=1`,l=yield(yield R(f,{headers:k})).text(),$=W.load(l),S=[];if($(".ipsStreamItem_title a").each((c,m)=>{let o=$(m);o.length&&S.push({title:o.text().trim(),href:o.attr("href")})}),S.length===0&&h){console.log("[Tamilblasters] 0 results for title, trying numeric search...");let m=yield(yield R(`${D}/index.php?/search/&q=${s}&quick=1`,{headers:k})).text(),o=W.load(m);o(".ipsStreamItem_title a").each((E,y)=>{let L=o(y);L.length&&S.push({title:L.text().trim(),href:L.attr("href")})})}console.log(`[Tamilblasters] Found ${S.length} search results`);let i=S.filter(c=>{let m=z(r.title,c.title),o=!r.year||t==="tv"||c.title.includes(r.year);return console.log(`[Tamilblasters] Candidate Match: "${c.title}" (Score: ${m.toFixed(2)}, YearMatch: ${o})`),m>.4&&o}).sort((c,m)=>{let o=c.title.toLowerCase().includes("watch online")?1:0,E=m.title.toLowerCase().includes("watch online")?1:0;return o!==E?E-o:z(r.title,m.title)-z(r.title,c.title)}).slice(0,8);if(i.length===0)return[];let a=[],A=30;return yield Promise.all(i.map(c=>x(this,null,function*(){try{let o=yield(yield R(c.href,{headers:k})).text(),E=W.load(o),y=E("h1.entry-title").text().trim()||c.title,L=y.match(/\(?(\d{4})\)?/),X=L?L[1]:r.year||"N/A",B=[];E("iframe").each((d,v)=>{let M=E(v).attr("src");if(!M||M.includes("google")||M.includes("youtube"))return;let T=`Stream ${d+1}`,g=E(v);for(let P=0;P<5;P++){let I=g.prev();if(I.length===0){if(g=g.parent(),!g.length||g.is("body"))break;continue}let p=I.text().trim();if(p.toLowerCase().includes("episode")||p.match(/EP\d+/i)||p.match(/\(\d+-\d+\)/)){T=p;break}g=I}console.log(`[Tamilblasters] Found Embed: ${M.substring(0,30)}... (Label: ${T})`),B.push({url:M,label:T})}),yield Promise.all(B.map(d=>x(this,null,function*(){if(a.length>=A)return;let v=d.label.match(/S(\d+)/i)||d.label.match(/Season\s*(\d+)/i),M=d.label.match(/E(\d+)/i)||d.label.match(/Episode\s*(\d+)/i)||d.label.match(/EP\s*(\d+)/i)||d.label.match(/–\s*(\d+)/),T=v?parseInt(v[1]):null,g=M?parseInt(M[1]):null;if(T===null){let u=y.match(/S(\d+)/i)||y.match(/Season\s*(\d+)/i);u&&(T=parseInt(u[1]))}if(g===null){let u=y.match(/E(\d+)/i)||y.match(/Episode\s*(\d+)/i)||y.match(/EP\s*(\d+)/i);u&&(g=parseInt(u[1]))}if(e!==null&&T!==null&&T!==e)return;if(n!==null){if(g!==null&&g!==n){let u=d.label.match(/(\d+)-(\d+)/);if(u){let w=parseInt(u[1]),_=parseInt(u[2]);if(n<w||n>_)return}else return}if(g===null){let u=y.match(/EP\((\d+)-(\d+)\)/)||y.match(/\((\d+)-(\d+)\)/);if(u){let w=parseInt(u[1]),_=parseInt(u[2]);if(n<w||n>_)return}}}let P=T!==null?T:e,I=g!==null?g:n,p=yield C.extract(d.url);if(!p)return;let N=q(F({},k),{Referer:p.referer,Origin:p.origin});if(yield tt(p.url,N)){let u=r.title;if(t==="tv"){let w=d.label.replace(/^(?:Episode|EP|S\d+E\d+)\s*\d*\s*[–-]?\s*/i,"").trim();P!==null&&I!==null?(u+=` - S${P} E${I}`,w&&w!==d.label&&w.length>0&&(u+=` - ${w}`)):I!==null?(u+=` - Episode ${I}`,w&&w!==d.label&&w.length>0&&(u+=` - ${w}`)):u+=` - ${d.label}`}a.push({name:"Tamilblasters",title:`Tamilblasters (Instant) (${p.quality})
\u{1F4FC}: ${u} (${X})
\u{1F310}: ${p.audios.join(" / ")||"TAMIL"}`,url:p.url,quality:p.quality,headers:N,provider:"Tamilblasters"})}})))}catch(m){}}))),console.log(`[Tamilblasters] \u2728 Completed. Found ${a.length} playable streams.`),a}catch(r){return console.error(`[Tamilblasters] Fatal Error: ${r.message}`),[]}})}typeof module!="undefined"&&module.exports?module.exports={getStreams:O}:global.getStreams={getStreams:O};
