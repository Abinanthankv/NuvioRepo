/**
 * tamilblasters - Built from src/tamilblasters/
 * Generated: 2026-01-18T06:26:12.441Z
 */
var G=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var H=(s,t,e)=>t in s?G(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,q=(s,t)=>{for(var e in t||(t={}))J.call(t,e)&&H(s,e,t[e]);if(j)for(var e of j(t))Z.call(t,e)&&H(s,e,t[e]);return s},D=(s,t)=>K(s,Q(t));var R=(s,t,e)=>new Promise((a,o)=>{var m=l=>{try{g(e.next(l))}catch(y){o(y)}},n=l=>{try{g(e.throw(l))}catch(y){o(y)}},g=l=>l.done?a(l.value):Promise.resolve(l.value).then(m,n);g((e=e.apply(s,t)).next())});var z=require("cheerio-without-node-native"),V="1b3113663c9004682ed61086cf967c44",tt="https://api.themoviedb.org/3",_="https://1tamilblasters.bz",L={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0",Referer:`${_}/`,Accept:"*/*","Accept-Language":"en-US,en;q=0.9","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"};function v(a){return R(this,arguments,function*(s,t={},e=1e4){let o=new AbortController,m=setTimeout(()=>o.abort(),e);try{let n=yield fetch(s,D(q({},t),{signal:o.signal}));return clearTimeout(m),n}catch(n){throw clearTimeout(m),n}})}function et(e){return R(this,arguments,function*(s,t={}){try{let a=yield v(s,{method:"GET",headers:t},5e3);return a.ok||a.status===206}catch(a){return!1}})}function st(s){try{return typeof atob!="undefined"?atob(s.trim()):Buffer.from(s.trim(),"base64").toString("binary")}catch(t){return null}}function nt(s,t,e,a){for(;e--;)a[e]&&(s=s.replace(new RegExp("\\b"+e.toString(t)+"\\b","g"),a[e]));return s}function O(s){return(s||"").toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}function B(s,t){let e=O(s),a=O(t);if(e===a)return 1;if(e.includes(a)||a.includes(e))return .9;let o=new Set(e.split(/\s+/).filter(l=>l.length>2)),m=new Set(a.split(/\s+/).filter(l=>l.length>2));if(o.size===0||m.size===0)return 0;let n=new Set([...o].filter(l=>m.has(l))),g=new Set([...o,...m]);return n.size/g.size}var C=class{static extract(t,e=0){return R(this,null,function*(){if(e>2)return null;try{let o=yield(yield v(t,{headers:D(q({},L),{Referer:_})},5e3)).text(),m=new URL(t).origin,n=o.match(new RegExp("eval\\(function\\(p,a,c,k,e,d\\)\\{.*?\\}\\s*\\((.*)\\)\\s*\\)","s"));if(n){let r=n[1].trim().match(new RegExp("^'(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"));r&&(o+=`
`+nt(r[1],parseInt(r[2]),parseInt(r[3]),r[4].split("|")))}let g=[/["']hls[2-4]["']\s*:\s*["']([^"']+)["']/gi,/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/gi,/https?:\/\/[^\s"']+\.m3u8[^\s"']*/gi,/["'](\/[^\s"']+\.m3u8[^\s"']*)["']/gi,/["']?file["']?\s*:\s*["']([^"']+)["']/gi],l=[];for(let r of g){let i=o.match(r);i&&i.forEach(S=>{let E=S.replace(/^.*?["']/,"").replace(/["'].*$/,"");E.startsWith("/")&&!E.startsWith("//")&&(E=m+E),(E.includes(".m3u8")||E.includes(".mp4"))&&l.push(E)})}let y=o.match(/[A-Za-z0-9+/]{24,}=*/g);if(y&&y.forEach(r=>{let i=st(r);i&&(i.includes(".m3u8")||i.startsWith("http"))&&l.push(i)}),l.length>0){l.sort((i,S)=>(S.includes("?")?1:0)-(i.includes("?")?1:0)||S.length-i.length);let r=l[0];return console.log(`[Tamilblasters] Winner Discovered: ${r}`),yield this.resolveManifest(r,t)}let A=o.matchAll(/href\s*=\s*["'](https?:\/\/[^"']*\/(?:stream|file|d|v|e)\/[^"']+)["']/gi);for(let r of A){console.log(`[Tamilblasters] Following Discovery Jump: ${r[1]}`);let i=yield this.extract(r[1],e+1);if(i)return i}return null}catch(a){return null}})}static resolveManifest(t,e){return R(this,null,function*(){try{let a=new URL(e).origin+"/",m=yield(yield v(t,{headers:D(q({},L),{Referer:a})},5e3)).text(),n=[],g=[],l=new URL(t).search,y=m.matchAll(/#EXT-X-MEDIA:TYPE=AUDIO.*?NAME="([^"]+)"/g);for(let r of y)g.includes(r[1])||g.push(r[1]);let A=m.matchAll(/#EXT-X-STREAM-INF:.*?RESOLUTION=\d+x(\d+).*?\n(.*)/gi);for(let r of A){let i=r[2].trim();i.startsWith("http")||(i=t.substring(0,t.lastIndexOf("/")+1)+i),l&&!i.includes("?")&&(i+=l),n.push({url:i,quality:this.heightToQuality(r[1])})}return{url:(n.length>0,t),quality:n.length>0?n[0].quality:"Unknown",audios:g,referer:a,origin:new URL(a).origin}}catch(a){return null}})}static heightToQuality(t){return t=parseInt(t),t>=2160?"4K":t>=1080?"1080p":t>=720?"720p":t>=480?"480p":t+"p"}};function X(s,t="movie",e=null,a=null){return R(this,null,function*(){let o=/^\d+$/.test(s),m=o?null:s;console.log(`[Tamilblasters] \u{1F680} Starting High-Speed Fetch for ${t}: ${s}`);try{let n;if(o){let f=0;for(;f<3;)try{let h=yield v(`${tt}/${t==="movie"?"movie":"tv"}/${s}?api_key=${V}`);if(!h.ok)throw new Error(`HTTP ${h.status}`);let c=yield h.json();n={title:c.title||c.name,year:(c.release_date||c.first_air_date||"").split("-")[0]},console.log(`[Tamilblasters] TMDB Resolved: ${n.title} (${n.year})`);break}catch(h){f++,console.log(`[Tamilblasters] TMDB Attempt ${f} failed: ${h.message}`),f<3&&(yield new Promise(c=>setTimeout(c,1e3)))}n||(console.log("[Tamilblasters] TMDB Failed after 3 attempts, falling back."),n={title:s,year:null})}else n={title:s,year:null};let g=`${_}/index.php?/search/&q=${encodeURIComponent(n.title)}&quick=1`,y=yield(yield v(g,{headers:L})).text(),A=z.load(y),r=[];if(A(".ipsStreamItem_title a").each((f,h)=>{let c=A(h);c.length&&r.push({title:c.text().trim(),href:c.attr("href")})}),r.length===0&&o){console.log("[Tamilblasters] 0 results for title, trying numeric search...");let h=yield(yield v(`${_}/index.php?/search/&q=${s}&quick=1`,{headers:L})).text(),c=z.load(h);c(".ipsStreamItem_title a").each((M,$)=>{let k=c($);k.length&&r.push({title:k.text().trim(),href:k.attr("href")})})}console.log(`[Tamilblasters] Found ${r.length} search results`);let i=r.filter(f=>{let h=B(n.title,f.title),c=!n.year||f.title.includes(n.year);return console.log(`[Tamilblasters] Candidate Match: "${f.title}" (Score: ${h.toFixed(2)}, YearMatch: ${c})`),h>.4&&c}).sort((f,h)=>{let c=f.title.toLowerCase().includes("watch online")?1:0,M=h.title.toLowerCase().includes("watch online")?1:0;return c!==M?M-c:B(n.title,h.title)-B(n.title,f.title)}).slice(0,8);if(i.length===0)return[];let S=[],E=30;return yield Promise.all(i.map(f=>R(this,null,function*(){try{let c=yield(yield v(f.href,{headers:L})).text(),M=z.load(c),$=M("h1.entry-title").text().trim()||f.title,k=$.match(/\(?(\d{4})\)?/),Y=k?k[1]:n.year||"N/A",N=[];M("iframe").each((d,P)=>{let I=M(P).attr("src");if(!I||I.includes("google")||I.includes("youtube"))return;let T=`Stream ${d+1}`,p=M(P);for(let F=0;F<5;F++){let x=p.prev();if(x.length===0){if(p=p.parent(),!p.length||p.is("body"))break;continue}let b=x.text().trim();if(b.toLowerCase().includes("episode")||b.match(/EP\d+/i)||b.match(/\(\d+-\d+\)/)){T=b;break}p=x}console.log(`[Tamilblasters] Found Embed: ${I.substring(0,30)}... (Label: ${T})`),N.push({url:I,label:T})}),yield Promise.all(N.map(d=>R(this,null,function*(){if(S.length>=E)return;let P=d.label.match(/S(\d+)/i)||d.label.match(/Season\s*(\d+)/i),I=d.label.match(/E(\d+)/i)||d.label.match(/Episode\s*(\d+)/i)||d.label.match(/EP\s*(\d+)/i)||d.label.match(/–\s*(\d+)/),T=P?parseInt(P[1]):null,p=I?parseInt(I[1]):null;if(T===null){let u=$.match(/S(\d+)/i)||$.match(/Season\s*(\d+)/i);u&&(T=parseInt(u[1]))}if(p===null){let u=$.match(/E(\d+)/i)||$.match(/Episode\s*(\d+)/i)||$.match(/EP\s*(\d+)/i);u&&(p=parseInt(u[1]))}if(e!==null&&T!==null&&T!==e)return;if(a!==null){if(p!==null&&p!==a){let u=d.label.match(/(\d+)-(\d+)/);if(u){let w=parseInt(u[1]),W=parseInt(u[2]);if(a<w||a>W)return}else return}if(p===null){let u=$.match(/EP\((\d+)-(\d+)\)/)||$.match(/\((\d+)-(\d+)\)/);if(u){let w=parseInt(u[1]),W=parseInt(u[2]);if(a<w||a>W)return}}}let F=T!==null?T:e,x=p!==null?p:a,b=yield C.extract(d.url);if(!b)return;let U=D(q({},L),{Referer:b.referer,Origin:b.origin});if(yield et(b.url,U)){let u=n.title;if(t==="tv"){let w=d.label.replace(/^(?:Episode|EP|S\d+E\d+)\s*\d*\s*[–-]?\s*/i,"").trim();F!==null&&x!==null?(u+=` - S${F} E${x}`,w&&w!==d.label&&w.length>0&&(u+=` - ${w}`)):x!==null?(u+=` - Episode ${x}`,w&&w!==d.label&&w.length>0&&(u+=` - ${w}`)):u+=` - ${d.label}`}S.push({name:"Tamilblasters",title:`Tamilblasters (Instant) (${b.quality})
\u{1F4FC}: ${u} (${Y})
\u{1F310}: ${b.audios.join(" / ")||"TAMIL"}`,url:b.url,quality:b.quality,headers:U,provider:"Tamilblasters"})}})))}catch(h){}}))),console.log(`[Tamilblasters] \u2728 Completed. Found ${S.length} playable streams.`),S}catch(n){return console.error(`[Tamilblasters] Fatal Error: ${n.message}`),[]}})}typeof module!="undefined"&&module.exports?module.exports={getStreams:X}:global.getStreams={getStreams:X};
