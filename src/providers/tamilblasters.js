/**
 * tamilblasters - Built from src/tamilblasters/
 * Generated: 2026-01-12T02:17:22.026Z
 */
var tt=Object.defineProperty,et=Object.defineProperties;var st=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var G=(e,s,t)=>s in e?tt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,x=(e,s)=>{for(var t in s||(s={}))rt.call(s,t)&&G(e,t,s[t]);if(Y)for(var t of Y(s))nt.call(s,t)&&G(e,t,s[t]);return e},A=(e,s)=>et(e,st(s));var R=(e,s,t)=>new Promise((l,i)=>{var n=r=>{try{f(t.next(r))}catch(a){i(a)}},u=r=>{try{f(t.throw(r))}catch(a){i(a)}},f=r=>r.done?l(r.value):Promise.resolve(r.value).then(n,u);f((t=t.apply(e,s)).next())});var Z=require("cheerio-without-node-native"),at="1b3113663c9004682ed61086cf967c44",it="https://api.themoviedb.org/3",T="https://www.1tamilblasters.business",N={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Referer:`${T}/`};function W(l){return R(this,arguments,function*(e,s={},t=1e4){let i=new AbortController,n=setTimeout(()=>i.abort(),t);try{let u=yield fetch(e,A(x({},s),{signal:i.signal}));return clearTimeout(n),u}catch(u){throw clearTimeout(n),u.name==="AbortError"?new Error(`Request timeout after ${t}ms`):u}})}function ot(e){return e?e.replace(/\w\S*/g,s=>s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()):""}function Q(e){return e?e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim():""}function lt(e,s){let t=Q(e),l=Q(s);if(t===l)return 1;if(t.includes(l)||l.includes(t))return .9;let i=new Set(t.split(/\s+/).filter(r=>r.length>2)),n=new Set(l.split(/\s+/).filter(r=>r.length>2));if(i.size===0||n.size===0)return 0;let u=new Set([...i].filter(r=>n.has(r))),f=new Set([...i,...n]);return u.size/f.size}function ct(e,s,t,l){for(;t--;)if(l[t]){let i=t.toString(s);e=e.replace(new RegExp("\\b"+i+"\\b","g"),l[t])}return e}function ut(e,s){if(!s||s.length===0)return[];let t=e.title.toLowerCase().replace(/[^a-z0-9]/g,""),l=e.year?parseInt(e.year):null,i=[];for(let n of s){let u=n.title.toLowerCase().replace(/[^a-z0-9]/g,""),f=lt(e.title,n.title),r=u.includes(t),a=!l||n.title.includes(l.toString())||n.title.includes((l+1).toString())||n.title.includes((l-1).toString());r&&a&&(f+=.5),f>.4&&(console.log(`[Tamilblasters] Match found: "${n.title}" (score: ${f.toFixed(2)})`),i.push(n))}return i}function ht(e,s){let{title:t,year:l}=e,{quality:i,type:n,size:u,language:f,seasonCode:r,episodeCode:a,label:h,baseTitle:c}=s,p=t.toLowerCase()===c.toLowerCase()||t===t.toLowerCase()?c:t,o=l||s.year,m=o?` (${o})`:"",v=!!(r||a),g=`\u{1F4FC}: ${p}${m}`;v?g+=` - ${r||"S01"} ${a||""}`:h&&!h.includes("Stream")&&(g+=` (${h})`),g+=` - ${i!=="Unknown"?i:""}`;let P=n&&n!=="UNKNOWN"?`\u{1F4FA}: ${n}
`:"",b=u&&u!=="UNKNOWN"?`\u{1F4BE}: ${u} | \u{1F69C}: tamilblasters
`:"",y=f||"TAMIL";return s.audioInfo&&(y=s.audioInfo),`Tamilblasters (Instant) (${i})
${P}${g}
${b}\u{1F310}: ${y.toUpperCase()}`}function mt(e,s){return R(this,null,function*(){let l=`${it}/${s==="movie"?"movie":"tv"}/${e}?api_key=${at}`;try{let n=yield(yield W(l,{},8e3)).json(),u={title:n.title||n.name,year:(n.release_date||n.first_air_date||"").split("-")[0]};return console.log(`[Tamilblasters] TMDB Info: "${u.title}" (${u.year||"N/A"})`),u}catch(i){throw console.error("[Tamilblasters] Error fetching TMDB metadata:",i.message),i}})}function ft(e){return R(this,null,function*(){let s=`${T}/?s=${encodeURIComponent(e)}`;console.log(`[Tamilblasters] Searching: ${s}`);try{let t=yield W(s,{headers:N},8e3);if(t.url&&!t.url.includes(new URL(T).hostname))try{let u=new URL(t.url);u.protocol.startsWith("http")&&(console.log(`[Tamilblasters] Domain redirect detected: ${T} -> ${u.origin}`),T=u.origin,N.Referer=`${T}/`)}catch(u){}let l=yield t.text(),i=Z.load(l),n=[];return i(".posts-wrapper article, .nv-index-posts article").each((u,f)=>{let r=i(f).find("h2.entry-title a"),a=r.text().trim(),h=r.attr("href");a&&h&&n.push({title:a,href:h})}),n}catch(t){return console.error("[Tamilblasters] Search error:",t.message),[]}})}function pt(e){return R(this,null,function*(){try{let t=yield(yield W(e,{headers:A(x({},N),{Referer:T})},5e3)).text();if(!t.includes("#EXTM3U"))return{variants:[{url:e,quality:"Unknown"}],audios:[]};let l=[],i=[],n=t.matchAll(/#EXT-X-MEDIA:TYPE=AUDIO.*?NAME="([^"]+)"(?:.*?CHANNELS="([^"]+)")?/g);for(let r of n){let a=r[1],h=r[2];h&&(a+=` (${{1:"1.0",2:"2.0",6:"5.1",8:"7.1"}[h]||h})`),i.includes(a)||i.push(a)}if(t.includes("#EXT-X-STREAM-INF")){let r=t.split(`
`);for(let a=0;a<r.length;a++){let h=r[a].trim();if(h.includes("#EXT-X-STREAM-INF")){let c="Unknown",p=h.match(/RESOLUTION=(\d+)x(\d+)/i);if(p){let m=parseInt(p[2]);m>=2160?c="4K":m>=1080?c="1080p":m>=720?c="720p":m>=480?c="480p":c=`${m}p`}let o=a+1;for(;o<r.length&&(r[o].trim().startsWith("#")||!r[o].trim());)o++;if(o<r.length){let m=r[o].trim();m&&!m.startsWith("#")&&(m.startsWith("http")||(m=e.substring(0,e.lastIndexOf("/")+1)+m),l.push({url:m,quality:c}))}a=o}}}if(l.length>0){let r={"4K":2160,"1080p":1080,"720p":720,"480p":480,Unknown:0};return l.sort((a,h)=>(r[h.quality]||0)-(r[a.quality]||0)),{variants:l,audios:i}}let u=t.match(/\b(2160p|1080p|720p|480p|4K|UHD|HD)\b/i),f=u?u[0]:"Unknown";return{variants:[{url:e,quality:f}],audios:i}}catch(s){return console.error(`[Tamilblasters] Error detecting quality: ${s.message}`),{variants:[{url:e,quality:"Unknown"}],audios:[]}}})}function dt(e){return R(this,null,function*(){try{console.log(`[Tamilblasters] Embed URL: ${e}`);let t=new URL(e).hostname.toLowerCase();return console.log(`[Tamilblasters] Attempting universal extraction from: ${t}`),yield gt(e,t)}catch(s){return console.error(`[Tamilblasters] Extraction error: ${s.message}`),[]}})}function gt(e,s){return R(this,null,function*(){try{let t=new URL(e).origin,i=yield(yield W(e,{headers:A(x({},N),{Referer:T})},5e3)).text();if(i.includes("<title>Loading...</title>")||i.includes("Page is loading")){console.log(`[Tamilblasters] Detected landing page on ${s}, trying mirrors...`);let r=["yuguaab.com","cavanhabg.com"];for(let a of r){if(s.includes(a))continue;let h=e.replace(s,a);try{let p=yield(yield W(h,{headers:A(x({},N),{Referer:T})},3e3)).text();if(p.includes("jwplayer")||p.includes("sources")||p.includes("eval(function(p,a,c,k,e,d)")){i=p;break}}catch(c){}}}let n=i.match(new RegExp("eval\\(function\\(p,a,c,k,e,d\\)\\{.*?\\}\\s*\\((.*)\\)\\s*\\)","s"));if(n){let a=n[1].trim().match(new RegExp("^'(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"));if(a){let h=ct(a[1],parseInt(a[2]),parseInt(a[3]),a[4].split("|"));i+=`
`+h}}let u=[/["']hls[2-4]["']\s*:\s*["']([^"']+)["']/gi,/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/gi,/https?:\/\/[^\s"']+\.m3u8[^\s"']*/gi,/["'](\/[^\s"']+\.m3u8[^\s"']*)["']/gi],f=[];for(let r of u){let a=i.match(r);if(a)for(let h of a){let c=h,p=h.match(/["']:[ ]*["']([^"']+)["']/);if(p)c=p[1];else{let m=h.match(/["']([^"']+)["']/);m&&(c=m[1])}let o=c.match(/https?:\/\/[^\s"']+/);o&&(c=o[0]),c=c.replace(/[\\"'\)\]]+$/,""),!(!c||c.length<5||c.includes("google.com")||c.includes("youtube.com"))&&(c.startsWith("/")&&!c.startsWith("//")&&(c=t+c),f.push(c))}}if(f.length>0){f.sort((a,h)=>{let c=a.includes("?"),p=h.includes("?");if(c!==p)return p?1:-1;let o=a.toLowerCase().includes(".m3u8"),m=h.toLowerCase().includes(".m3u8");return o!==m?m?1:-1:a.length-h.length});let r=f[0];return console.log(`[Tamilblasters] Detected best URL: ${r}. Resolving quality...`),yield pt(r)}return[]}catch(t){return console.error(`[Tamilblasters] Error extracting from ${s}: ${t.message}`),[]}})}function J(e,s="movie",t=null,l=null){return R(this,null,function*(){var i;console.log(`[Tamilblasters] Processing ${s} ${e}`);try{let n;if(/^\d+$/.test(e))try{n=yield mt(e,s)}catch(o){console.log(`[Tamilblasters] TMDB fetch failed, using "${e}" as search query`),n={title:e,year:null}}else console.log(`[Tamilblasters] Using "${e}" as search query indirectly`),n={title:ot(e),year:null};let f=yield ft(n.title),r=ut(n,f);if(r.length===0)return console.warn("[Tamilblasters] No matching titles found in search results"),[];let a=[],h=new Set;for(let o of r)h.has(o.href)||(h.add(o.href),a.push(o));let c=a.slice(0,3);console.log(`[Tamilblasters] Processing top ${c.length} unique matches out of ${r.length} total`);let p=[];for(let o of c){console.log(`[Tamilblasters] Processing match: ${o.title} -> ${o.href}`);try{let v=yield(yield W(o.href,{headers:N},8e3)).text(),g=Z.load(v),P=g("h1.entry-title").text().trim()||o.title;console.log(`[Tamilblasters] Full Page Title: ${P}`);let b=[],y=o.title,F=y.match(/[\(\[](\d{4})[\)\]]/),H=y,K="",_="Original";F&&(K=F[1],H=y.split(F[0])[0].trim(),_=((i=y.split(F[0])[1])==null?void 0:i.trim())||"Original"),g("iframe").each((C,d)=>{let S=g(d).attr("src");if(!S||S.includes("google.com")||S.includes("youtube.com"))return;let $="",E=g(d);for(let L=0;L<5;L++){let U=E.prev();if(U.length===0){if(E=E.parent(),E.is("body")||E.length===0)break;continue}let B=U.text().trim();if(B.toLowerCase().includes("episode")){$=B.replace(/[\r\n]+/g," ").trim();break}E=U}let w=$||g(d).closest("div").prev("p").text().trim()||"Stream "+(C+1);if(w.toLowerCase().includes("episode")){let L=w.match(/Episode\s*[–-ー]\s*(\d+)/i)||w.match(/Episode\s*(\d+)/i);L&&(w=`EP${L[1]}`)}let O=s==="tv"||y.match(/S\d+.*EP/i)||y.match(/Season.*Episode/i)||w.match(/EP\s*\d+/i)||w.match(/Episode\s*\d+/i),I="",z="",M=_;if(O){let L=y.match(/S(\d+)/i);I=L?`S${L[1].padStart(2,"0")}`:"S01";let U=null,B=w.match(/EP\s*(\d+)/i)||w.match(/Episode\s*(\d+)/i);if(B)U=B[1];else{let V=y.match(/EP\s*(\d+)/i);V&&(U=V[1])}z=U?`E${U.padStart(2,"0")}`:w,M=M.replace(/S\d+/gi,"").replace(/EP\s*\(.*?\)/gi,"").replace(/EP\d+/gi,"").replace(/\s+/g," ").trim(),M=M.replace(/^[-\s,[\]]+|[-\s,[\]]+$/g,"").trim()}let k="UNKNOWN",q=(P+" "+w).toLowerCase();q.includes("bluray")||q.includes("brrip")?k="BluRay":q.includes("web-dl")||q.includes("webdl")?k="WEB-DL":q.includes("webrip")?k="WEBRip":q.includes("hdrip")?k="HDRip":q.includes("dvdrip")&&(k="DVDRip"),b.push({baseTitle:H,year:K,language:M,seasonCode:I,episodeCode:z,type:k,url:S,label:w,matchTitle:o.title})});let X=b.slice(0,5);b.length>5&&console.log(`[Tamilblasters] Limiting to first 5 iframes out of ${b.length} for performance`),console.log(`[Tamilblasters] Extracting direct streams from ${X.length} embed URLs for "${o.title}"...`);let j=[];for(let C of X)try{let d=yield Promise.race([dt(C.url),new Promise((S,$)=>setTimeout(()=>$(new Error("Extraction timeout after 5 seconds")),5e3))]);if(d&&d.variants&&d.variants.length>0){let S=d.audios.length>0?d.audios.join(", "):"";for(let $ of d.variants)j.push(A(x({},C),{url:$.url,quality:$.quality,audioInfo:S}))}}catch(d){console.error(`[Tamilblasters] Failed to extract stream: ${d.message}`)}let D=j;if(t!==null||l!==null){let C=l!==null?`EP${l.toString().padStart(2,"0")}`:null,d=l!==null?`e${l.toString().padStart(2,"0")}`:null,S=l!==null?`e ${l.toString().padStart(2,"0")}`:null,$=t!==null?`S${t.toString().padStart(2,"0")}`:null,E=t!==null?`s${t.toString().padStart(2,"0")}`:null;if(!$||o.title.toUpperCase().includes($)||o.title.toLowerCase().includes(E)){let O=D.filter(I=>{if(!C)return!0;let z=I.title.toUpperCase(),M=I.title.toLowerCase();return z.includes(C)||M.includes(d)||M.includes(S)||z.includes(`EPISODE ${l}`)});D=O,O.length>0?console.log(`[Tamilblasters] Filtered to ${D.length} streams for episode ${l}`):console.log(`[Tamilblasters] No streams found matching epsiode ${l}`)}else D=[]}if(console.log(`[Tamilblasters] Successfully extracted ${D.length} direct streams for "${o.title}"`),p.push(...D),p.length>=10){console.log(`[Tamilblasters] Found ${p.length} streams, stopping early`);break}}catch(m){console.error(`[Tamilblasters] Failed to process match ${o.title}:`,m.message)}}return p.map(o=>{let m=o.quality||"Unknown",v="UNKNOWN";if(o.matchTitle&&m!=="Unknown"){let P=new RegExp(`${m}\\s*[\\[\\(]([^\\]\\)]+)[\\]\\)]`,"i"),b=o.matchTitle.match(P);b&&(v=b[1].toUpperCase())}let g=A(x({},o),{quality:m,size:v});return{name:"Tamilblasters",title:ht(n,g),url:o.url,quality:g.quality,headers:{Referer:T,"User-Agent":N["User-Agent"]},provider:"Tamilblasters"}})}catch(n){return console.error("[Tamilblasters] getStreams failed:",n.message),[]}})}typeof module!="undefined"&&module.exports?module.exports={getStreams:J}:global.getStreams={getStreams:J};
