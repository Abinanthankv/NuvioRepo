/**
 * tamilblasters - Built from src/tamilblasters/
 * Generated: 2026-01-17T04:38:02.484Z
 */
var j=Object.defineProperty,B=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var N=(s,t,e)=>t in s?j(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,A=(s,t)=>{for(var e in t||(t={}))H.call(t,e)&&N(s,e,t[e]);if(W)for(var e of W(t))X.call(t,e)&&N(s,e,t[e]);return s},L=(s,t)=>B(s,O(t));var $=(s,t,e)=>new Promise((a,o)=>{var u=i=>{try{d(e.next(i))}catch(m){o(m)}},l=i=>{try{d(e.throw(i))}catch(m){o(m)}},d=i=>i.done?a(i.value):Promise.resolve(i.value).then(u,l);d((e=e.apply(s,t)).next())});var U=require("cheerio-without-node-native"),Y="1b3113663c9004682ed61086cf967c44",G="https://api.themoviedb.org/3",q="https://www.1tamilblasters.business",P={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0",Referer:`${q}/`,Accept:"*/*","Accept-Language":"en-US,en;q=0.9","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"};function M(a){return $(this,arguments,function*(s,t={},e=1e4){let o=new AbortController,u=setTimeout(()=>o.abort(),e);try{let l=yield fetch(s,L(A({},t),{signal:o.signal}));return clearTimeout(u),l}catch(l){throw clearTimeout(u),l}})}function K(e){return $(this,arguments,function*(s,t={}){try{let a=yield M(s,{method:"GET",headers:t},5e3);return a.ok||a.status===206}catch(a){return!1}})}function Q(s){try{return typeof atob!="undefined"?atob(s.trim()):Buffer.from(s.trim(),"base64").toString("binary")}catch(t){return null}}function J(s,t,e,a){for(;e--;)a[e]&&(s=s.replace(new RegExp("\\b"+e.toString(t)+"\\b","g"),a[e]));return s}function C(s){return(s||"").toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}function Z(s,t){let e=C(s),a=C(t);if(e===a)return 1;if(e.includes(a)||a.includes(e))return .9;let o=new Set(e.split(/\s+/).filter(i=>i.length>2)),u=new Set(a.split(/\s+/).filter(i=>i.length>2));if(o.size===0||u.size===0)return 0;let l=new Set([...o].filter(i=>u.has(i))),d=new Set([...o,...u]);return l.size/d.size}var _=class{static extract(t,e=0){return $(this,null,function*(){if(e>2)return null;try{let o=yield(yield M(t,{headers:L(A({},P),{Referer:q})},5e3)).text(),u=new URL(t).origin,l=o.match(new RegExp("eval\\(function\\(p,a,c,k,e,d\\)\\{.*?\\}\\s*\\((.*)\\)\\s*\\)","s"));if(l){let n=l[1].trim().match(new RegExp("^'(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"));n&&(o+=`
`+J(n[1],parseInt(n[2]),parseInt(n[3]),n[4].split("|")))}let d=[/["']hls[2-4]["']\s*:\s*["']([^"']+)["']/gi,/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/gi,/https?:\/\/[^\s"']+\.m3u8[^\s"']*/gi,/["'](\/[^\s"']+\.m3u8[^\s"']*)["']/gi,/["']?file["']?\s*:\s*["']([^"']+)["']/gi],i=[];for(let n of d){let r=o.match(n);r&&r.forEach(y=>{let h=y.replace(/^.*?["']/,"").replace(/["'].*$/,"");h.startsWith("/")&&!h.startsWith("//")&&(h=u+h),(h.includes(".m3u8")||h.includes(".mp4"))&&i.push(h)})}let m=o.match(/[A-Za-z0-9+/]{24,}=*/g);if(m&&m.forEach(n=>{let r=Q(n);r&&(r.includes(".m3u8")||r.startsWith("http"))&&i.push(r)}),i.length>0){i.sort((r,y)=>(y.includes("?")?1:0)-(r.includes("?")?1:0)||y.length-r.length);let n=i[0];return console.log(`[Tamilblasters] Winner Discovered: ${n}`),yield this.resolveManifest(n,t)}let v=o.matchAll(/href\s*=\s*["'](https?:\/\/[^"']*\/(?:stream|file|d|v|e)\/[^"']+)["']/gi);for(let n of v){console.log(`[Tamilblasters] Following Discovery Jump: ${n[1]}`);let r=yield this.extract(n[1],e+1);if(r)return r}return null}catch(a){return null}})}static resolveManifest(t,e){return $(this,null,function*(){try{let a=new URL(e).origin+"/",u=yield(yield M(t,{headers:L(A({},P),{Referer:a})},5e3)).text(),l=[],d=[],i=new URL(t).search,m=u.matchAll(/#EXT-X-MEDIA:TYPE=AUDIO.*?NAME="([^"]+)"/g);for(let n of m)d.includes(n[1])||d.push(n[1]);let v=u.matchAll(/#EXT-X-STREAM-INF:.*?RESOLUTION=\d+x(\d+).*?\n(.*)/gi);for(let n of v){let r=n[2].trim();r.startsWith("http")||(r=t.substring(0,t.lastIndexOf("/")+1)+r),i&&!r.includes("?")&&(r+=i),l.push({url:r,quality:this.heightToQuality(n[1])})}return{url:(l.length>0,t),quality:l.length>0?l[0].quality:"Unknown",audios:d,referer:a,origin:new URL(a).origin}}catch(a){return null}})}static heightToQuality(t){return t=parseInt(t),t>=2160?"4K":t>=1080?"1080p":t>=720?"720p":t>=480?"480p":t+"p"}};function V(s,t="movie",e=null,a=null){return $(this,null,function*(){let o=/^\d+$/.test(s),u=o?null:s;console.log(`[Tamilblasters] \u{1F680} Starting High-Speed Fetch for ${t}: ${s}`);try{let[l,d]=yield Promise.all([$(this,null,function*(){if(!o)return{title:u,year:null};let r=yield(yield M(`${G}/${t==="movie"?"movie":"tv"}/${s}?api_key=${Y}`)).json();return{title:r.title||r.name,year:(r.release_date||r.first_air_date||"").split("-")[0]}}),$(this,null,function*(){let n=`${q}/?s=${encodeURIComponent(u||s)}`,y=yield(yield M(n,{headers:P})).text(),h=U.load(y),b=[];return h(".posts-wrapper article, .nv-index-posts article").each((k,F)=>{let I=h(F).find("h2.entry-title a");b.push({title:I.text().trim(),href:I.attr("href")})}),console.log(`[Tamilblasters] Found ${b.length} search results`),b})]),i=d.filter(n=>{let r=Z(l.title,n.title),y=!l.year||n.title.includes(l.year);return console.log(`[Tamilblasters] Candidate Match: "${n.title}" (Score: ${r.toFixed(2)}, YearMatch: ${y})`),r>.4&&y}).slice(0,3);if(i.length===0)return[];let m=[],v=30;return yield Promise.all(i.map(n=>$(this,null,function*(){try{let y=yield(yield M(n.href,{headers:P})).text(),h=U.load(y),b=h("h1.entry-title").text().trim()||n.title,k=b.match(/\(?(\d{4})\)?/),F=k?k[1]:l.year||"N/A",I=[];h("iframe").each((f,R)=>{let S=h(R).attr("src");if(!S||S.includes("google")||S.includes("youtube"))return;let E=`Stream ${f+1}`,p=h(R);for(let x=0;x<5;x++){let T=p.prev();if(T.length===0){if(p=p.parent(),!p.length||p.is("body"))break;continue}let g=T.text().trim();if(g.toLowerCase().includes("episode")||g.match(/EP\d+/i)||g.match(/\(\d+-\d+\)/)){E=g;break}p=T}console.log(`[Tamilblasters] Found Embed: ${S.substring(0,30)}... (Label: ${E})`),I.push({url:S,label:E})}),yield Promise.all(I.map(f=>$(this,null,function*(){if(m.length>=v)return;let R=f.label.match(/S(\d+)/i)||f.label.match(/Season\s*(\d+)/i),S=f.label.match(/E(\d+)/i)||f.label.match(/Episode\s*(\d+)/i)||f.label.match(/EP\s*(\d+)/i)||f.label.match(/–\s*(\d+)/),E=R?parseInt(R[1]):null,p=S?parseInt(S[1]):null;if(E===null){let c=b.match(/S(\d+)/i)||b.match(/Season\s*(\d+)/i);c&&(E=parseInt(c[1]))}if(p===null){let c=b.match(/E(\d+)/i)||b.match(/Episode\s*(\d+)/i)||b.match(/EP\s*(\d+)/i);c&&(p=parseInt(c[1]))}if(e!==null&&E!==null&&E!==e)return;if(a!==null){if(p!==null&&p!==a){let c=f.label.match(/(\d+)-(\d+)/);if(c){let w=parseInt(c[1]),D=parseInt(c[2]);if(a<w||a>D)return}else return}if(p===null){let c=b.match(/EP\((\d+)-(\d+)\)/)||b.match(/\((\d+)-(\d+)\)/);if(c){let w=parseInt(c[1]),D=parseInt(c[2]);if(a<w||a>D)return}}}let x=E,T=p,g=yield _.extract(f.url);if(!g)return;let z=L(A({},P),{Referer:g.referer,Origin:g.origin});if(yield K(g.url,z)){let c=l.title;if(t==="tv"){let w=f.label.replace(/^(?:Episode|EP|S\d+E\d+)\s*\d*\s*[–-]?\s*/i,"").trim();x!==null&&T!==null?(c+=` - S${x} E${T}`,w&&w!==f.label&&w.length>0&&(c+=` - ${w}`)):T!==null?(c+=` - Episode ${T}`,w&&w!==f.label&&w.length>0&&(c+=` - ${w}`)):c+=` - ${f.label}`}m.push({name:"Tamilblasters",title:`Tamilblasters (Instant) (${g.quality})
\u{1F4FC}: ${c} (${F})
\u{1F310}: ${g.audios.join(" / ")||"TAMIL"}`,url:g.url,quality:g.quality,headers:z,provider:"Tamilblasters"})}})))}catch(r){}}))),console.log(`[Tamilblasters] \u2728 Completed. Found ${m.length} playable streams.`),m}catch(l){return console.error(`[Tamilblasters] Fatal Error: ${l.message}`),[]}})}module.exports={getStreams:V};
