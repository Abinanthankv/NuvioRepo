/**
 * xdmovies - Built from src/xdmovies/
 * Generated: 2026-01-17T05:12:39.453Z
 */
var F=Object.defineProperty,N=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var A=(r,t,e)=>t in r?F(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,w=(r,t)=>{for(var e in t||(t={}))G.call(t,e)&&A(r,e,t[e]);if(k)for(var e of k(t))W.call(t,e)&&A(r,e,t[e]);return r},$=(r,t)=>N(r,V(t));var P=require("cheerio-without-node-native"),z="https://xdmovies.site",j="1b3113663c9004682ed61086cf967c44",I="https://api.themoviedb.org/3",M={"User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36",Referer:`${z}/`,"x-requested-with":"XMLHttpRequest","x-auth-token":atob("NzI5N3Nra2loa2Fqd25zZ2FrbGFrc2h1d2Q=")},C={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0",Referer:`${z}/`};function K(r){if(!r||r===0)return"Unknown";let t=1024,e=["Bytes","KB","MB","GB","TB"],i=Math.floor(Math.log(r)/Math.log(t));return parseFloat((r/Math.pow(t,i)).toFixed(1))+" "+e[i]}function X(r){let t=r.split(/[.\-_]/),e=["WEBRip","WEB-DL","WEB","BluRay","HDRip","DVDRip","HDTV","CAM","TS","R5","DVDScr","BRRip","BDRip","DVD","PDTV","HD"],i=["AAC","AC3","DTS","MP3","FLAC","DD5","EAC3","Atmos"],n=["ESub","ESubs","Subs","MultiSub","NoSub","EnglishSub","HindiSub"],o=["x264","x265","H264","HEVC","AVC"],s=t.findIndex(a=>e.some(f=>a.toLowerCase().includes(f.toLowerCase()))),u=t.findLastIndex(a=>n.some(f=>a.toLowerCase().includes(f.toLowerCase()))||i.some(f=>a.toLowerCase().includes(f.toLowerCase()))||o.some(f=>a.toLowerCase().includes(f.toLowerCase())));return s!==-1&&u!==-1&&u>=s?t.slice(s,u+1).join("."):s!==-1?t.slice(s).join("."):t.slice(-3).join(".")}function Q(r){if(!r)return"Unknown";let t=r.trim();return/HubCloud/i.test(t)?/FSL/i.test(t)?"HubCloud FSL Server":/FSL V2/i.test(t)?"HubCloud FSL V2 Server":/S3/i.test(t)?"HubCloud S3 Server":/Buzz/i.test(t)?"HubCloud BuzzServer":/10\s*Gbps/i.test(t)?"HubCloud 10Gbps":"HubCloud":/Pixeldrain/i.test(t)?"Pixeldrain":/StreamTape/i.test(t)?"StreamTape":/HubCdn/i.test(t)?"HubCdn":/HbLinks/i.test(t)?"HbLinks":/Hubstream/i.test(t)?"Hubstream":t.replace(/^www\./i,"").split(/[.\s]/)[0]}function O(r,t,e,i,n,o="",s=""){let u=r.title||"Unknown",a=String(i||1).padStart(2,"0"),f=String(n||1).padStart(2,"0"),d=i?` - S${a} E${f}`:r.year?` (${r.year})`:"";return`XDmovies (${e}) [${t}]
\u{1F4F9}: ${u}${d}`}function Z(r,t={}){let e=new AbortController,i=setTimeout(()=>e.abort(),5e3);return fetch(r,{method:"HEAD",headers:w(w({},C),t),signal:e.signal}).then(n=>(clearTimeout(i),n.status>=200&&n.status<400)).catch(()=>(clearTimeout(i),!1))}function _(r,t){return Promise.resolve().then(()=>{let e,i=r.match(/(?:file|u)\/([A-Za-z0-9]+)/);if(i?e=i[1]:e=r.split("/").pop(),!e)return[{source:"Pixeldrain",quality:"Unknown",url:r}];let n=`https://pixeldrain.com/api/file/${e}/info`,o=`https://pixeldrain.com/api/file/${e}?download`;return fetch(n,{headers:C}).then(s=>{if(!s.ok)throw new Error("Info fetch failed");return s.json()}).then(s=>{let u=t||"Unknown";if(s&&s.name){let a=s.name.match(/(\d{3,4})p/);a&&(u=a[0])}return[{source:"Pixeldrain",quality:u,url:o,name:s.name||"",size:s.size||0}]}).catch(s=>[{source:"Pixeldrain",quality:t||"Unknown",url:o,name:"",size:0}])}).catch(e=>(console.error("[Pixeldrain] extraction failed",e.message),[{source:"Pixeldrain",quality:"Unknown",url:r}]))}function Y(r){let t=new URL(r);t.hostname="streamtape.com";let e=t.toString();return fetch(e,{headers:C}).then(i=>i.text()).then(i=>{let n=i.match(/document\.getElementById\('videolink'\)\.innerHTML = (.*?);/);if(n&&n[1]){let u=n[1].match(/'(\/\/streamtape\.com\/get_video[^']+)'/);if(u&&u[1])return[{source:"StreamTape",quality:"Stream",url:"https:"+u[1]}]}let o=i.match(/'(\/\/streamtape\.com\/get_video[^']+)'/);return o&&o[0]?[{source:"StreamTape",quality:"Stream",url:"https:"+o[0].slice(1,-1)}]:[]}).catch(i=>((!i.response||i.response.status!==404)&&console.error(`[StreamTape] An unexpected error occurred for ${e}:`,i.message),[]))}function J(r,t){return fetch(r,{headers:$(w({},C),{Referer:t})}).then(e=>[{source:"Hubstream",quality:"Unknown",url:r}]).catch(e=>(console.error(`[Hubstream] Failed to extract from ${r}:`,e.message),[]))}function ee(r,t){return fetch(r,{headers:$(w({},C),{Referer:t})}).then(e=>e.text()).then(e=>{let i=P.load(e),n=i("h3 a, div.entry-content p a").map((u,a)=>i(a).attr("href")).get(),o=[],s=n.map(u=>U(u,r));return Promise.all(s).then(u=>(u.forEach(a=>o.push(...a)),o))})}function te(r,t){return fetch(r,{headers:$(w({},C),{Referer:t})}).then(e=>e.text()).then(e=>{let i=e.match(/r=([A-Za-z0-9+/=]+)/);if(i&&i[1]){let n=atob(i[1]);return[{source:"HubCdn",quality:"M3U8",url:n.substring(n.lastIndexOf("link=")+5)}]}return[]}).catch(()=>[])}function re(r,t){return fetch(r,{headers:$(w({},C),{Referer:t})}).then(e=>e.text()).then(e=>{let n=P.load(e)(".btn.btn-primary.btn-user.btn-success1.m-1").attr("href");return n?U(n,r):[]}).catch(()=>[])}function B(r,t){let e=r;return e.includes("hubcloud.ink")&&(e=e.replace("hubcloud.ink","hubcloud.dad")),/\/(video|drive)\//i.test(e)?fetch(e,{headers:$(w({},C),{Referer:t})}).then(n=>n.text()).then(n=>{let o=n.match(/href="(https?:\/\/hubcloud\.[^/]+\/hubcloud\.php[^"]+)"/);if(o&&o[1])return B(o[1],e);let u=P.load(n)('a[href*="hubcloud.php"]').attr("href");return u?B(u,e):[]}).catch(()=>[]):(e.includes("hubcloud.php")?fetch(e,{headers:$(w({},C),{Referer:t}),redirect:"follow"}).then(n=>n.text().then(o=>({pageData:o,finalUrl:n.url||e}))):fetch(e,{headers:$(w({},C),{Referer:t})}).then(n=>n.text()).then(n=>{let o=e,s=n.match(/var url = '([^']*)'/);return s&&s[1]?(o=s[1],fetch(o,{headers:$(w({},C),{Referer:e})}).then(u=>u.text()).then(u=>({pageData:u,finalUrl:o}))):{pageData:n,finalUrl:o}})).then(({pageData:n,finalUrl:o})=>{let s=P.load(n),u=s("i#size").text().trim(),a=s("div.card-header").text().trim(),d=(h=>{let c=(h||"").match(/(\d{3,4})[pP]/);return c?parseInt(c[1]):2160})(a),m=X(a),S=(()=>{let h="";return m&&(h+=`[${m}]`),u&&(h+=`[${u}]`),h})(),g=(()=>{if(!u)return 0;let h=u.match(/([\d.]+)\s*(GB|MB|KB)/i);if(!h)return 0;let c=parseFloat(h[1]);return h[2].toUpperCase()==="GB"?c*1024**3:h[2].toUpperCase()==="MB"?c*1024**2:h[2].toUpperCase()==="KB"?c*1024:0})(),l=[],p=s("a.btn[href]").get().map(h=>{let c=s(h).attr("href"),v=s(h).text();if(/telegram/i.test(v)||/telegram/i.test(c))return Promise.resolve();let L=a||m||"Unknown";if(v.includes("Download File"))return l.push({source:`HubCloud ${S}`,quality:d,url:c,size:g,fileName:L}),Promise.resolve();if(v.includes("FSL V2"))return l.push({source:`HubCloud - FSL V2 Server ${S}`,quality:d,url:c,size:g,fileName:L}),Promise.resolve();if(v.includes("FSL"))return l.push({source:`HubCloud - FSL Server ${S}`,quality:d,url:c,size:g,fileName:L}),Promise.resolve();if(v.includes("S3 Server"))return l.push({source:`HubCloud - S3 Server ${S}`,quality:d,url:c,size:g,fileName:L}),Promise.resolve();if(v.includes("BuzzServer"))return fetch(`${c}/download`,{method:"GET",headers:$(w({},C),{Referer:c}),redirect:"manual"}).then(b=>{if(b.status>=300&&b.status<400){let x=b.headers.get("location"),E=x==null?void 0:x.match(/hx-redirect=([^&]+)/);E&&l.push({source:`HubCloud - BuzzServer ${S}`,quality:d,url:decodeURIComponent(E[1]),size:g,fileName:L})}}).catch(()=>{});if(c.includes("pixeldra"))return console.log("[HubCloud] Using Pixeldrain extractor for link:",c),_(c,d).then(b=>{l.push(...b.map(x=>$(w({},x),{quality:typeof x.quality=="number"?x.quality:d,size:x.size||g,fileName:L})))}).catch(()=>{});if(v.includes("10Gbps")){let b=c,x=E=>E>=3?Promise.resolve(null):fetch(b,{redirect:"manual",headers:C}).then(R=>{if(R.status>=300&&R.status<400){let D=R.headers.get("location");return D?D.includes("link=")?D.split("link=")[1]:(b=new URL(D,b).toString(),x(E+1)):null}return R.text().then(D=>{let T=D.match(/window\.location\.href\s*=\s*'([^']+)'/);return T?(b=new URL(T[1],b).toString(),x(E+1)):null})}).catch(()=>null);return x(0).then(E=>{E&&l.push({source:`HubCloud - 10Gbps ${S}`,quality:d,url:E,size:g,fileName:L})})}let H=new URL(c).hostname;return H.includes("hubcloud")||H.includes("hubdrive")||H.includes("hubcdn")?Promise.resolve():U(c,o).then(b=>l.push(...b))});return Promise.all(p).then(()=>l)}).catch(()=>[])}function U(r,t=MAIN_URL){let e=new URL(r).hostname;if(e.includes("gdflix"))return gdFlixExtractor(r,t);if(e.includes("gofile"))return goFileExtractor(r);if(e.includes("hubcloud"))return B(r,t);if(e.includes("hubdrive"))return re(r,t);if(e.includes("hubcdn"))return te(r,t);if(e.includes("hblinks"))return ee(r,t);if(e.includes("hubstream"))return J(r,t);if(e.includes("pixeldrain"))return _(r);if(e.includes("streamtape"))return Y(r);if(e.includes("hdstream4u"))return Promise.resolve([{source:"HdStream4u",quality:"Unknown",url:r}]);if(e.includes("linkrit"))return Promise.resolve([]);if(e.includes("google.")||e.includes("ampproject.org")||e.includes("gstatic.")||e.includes("doubleclick.")||e.includes("ddl2"))return console.warn("[XDMovies] Blocked redirect host:",e),Promise.resolve([]);let i=e.replace(/^www\./,"");return Promise.resolve([{source:i,quality:"Unknown",url:r}])}function ne(r,t){let i=`${I}/${t==="tv"?"tv":"movie"}/${r}?api_key=${j}&append_to_response=external_ids`;return fetch(i,{method:"GET",headers:{Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}}).then(function(n){if(console.error("[TMDB] HTTP status:",n.status),!n.ok)throw new Error(`TMDB API error: ${n.status}`);return n.json()}).then(function(n){var a;let o=t==="tv"?n.name:n.title,s=t==="tv"?n.first_air_date:n.release_date,u=s?parseInt(s.split("-")[0]):null;return{title:o,year:u,imdbId:((a=n.external_ids)==null?void 0:a.imdb_id)||null}})}function q(r,t="movie",e=null,i=null){return ne(r,t).then(n=>n!=null&&n.title?fetch(`${z}/php/search_api.php?query=${encodeURIComponent(n.title)}&fuzzy=true`,{headers:M}).then(o=>o.ok?o.json():[]).then(o=>{if(!Array.isArray(o))return[];let s=o.find(d=>Number(d.tmdb_id)===Number(r));if(!(s!=null&&s.path))return[];let u="",a=s.title||"",f=[];return/multi\s*audio/i.test(a)?f.push("Multi Audio"):/dual\s*audio/i.test(a)&&f.push("Dual Audio"),/esub/i.test(a)?f.push("ESub"):/sub/i.test(a)&&f.push("Sub"),f.length>0&&(u=f.join(" + ")),fetch(z+s.path,{headers:M}).then(d=>d.text()).then(d=>{let m=P.load(d),S=[],g=p=>fetch(p,{headers:M,redirect:"manual"}).then(h=>{if(h.status>=300&&h.status<400){let c=h.headers.get("location");return c?new URL(c,p).toString():null}return p}).catch(()=>null);if(!e){let p=m("div.download-item a[href]").map((h,c)=>m(c).attr("href")).get();return Promise.all(p.map(h=>g(h).then(c=>{c&&S.push(c)}))).then(()=>S)}let l=new RegExp(`S${String(e).padStart(2,"0")}E${String(i).padStart(2,"0")}`,"i"),y=[];return m("div.episode-card").each((p,h)=>{let c=m(h),v=c.find(".episode-title").text()||"";l.test(v)&&c.find("a[href]").each((L,H)=>{let b=m(H).attr("href");b&&y.push(g(b).then(x=>{x&&S.push(x)}))})}),Promise.all(y).then(()=>S)}).then(d=>d.length?Promise.all(d.map(m=>U(m,z).catch(()=>[]))).then(m=>{let S=m.flat(),g=new Set;return S.filter(l=>!l||!l.url||g.has(l.url)?!1:(g.add(l.url),!0)).map(l=>{let y;t==="tv"?y=`${n.title} S${String(e).padStart(2,"0")}E${String(i).padStart(2,"0")}`:n.year?y=`${n.title} (${n.year})`:y=n.title;let p="Unknown";l.quality>=2160?p="2160p":l.quality>=1440?p="1440p":l.quality>=1080?p="1080p":l.quality>=720?p="720p":l.quality>=480?p="480p":l.quality>=360&&(p="360p");let h=Q(l.source),c=K(l.size),v={name:`XDmovies ${h}`,title:O(n,h,p,e,i,c,u),url:l.url,quality:p,size:c,headers:l.headers,provider:"XDmovies"};return Z(v.url,v.headers).then(L=>L?v:null)})}).then(m=>Promise.all(m).then(S=>S.filter(Boolean))):[])}):[]).catch(n=>(console.error("[XDmovies] getStreams failed:",n.message),[]))}typeof module!="undefined"&&module.exports?module.exports={getStreams:q}:global.getStreams={getStreams:q};
