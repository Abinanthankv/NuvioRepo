/**
 * tamilblastersbz - Built from src/tamilblastersbz/
 * Generated: 2026-01-18T10:32:37.357Z
 */
var F=Object.defineProperty,O=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var z=(r,t,e)=>t in r?F(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,I=(r,t)=>{for(var e in t||(t={}))j.call(t,e)&&z(r,e,t[e]);if(D)for(var e of D(t))H.call(t,e)&&z(r,e,t[e]);return r},v=(r,t)=>O(r,Y(t));var $=(r,t,e)=>new Promise((o,i)=>{var f=l=>{try{h(e.next(l))}catch(u){i(u)}},a=l=>{try{h(e.throw(l))}catch(u){i(u)}},h=l=>l.done?o(l.value):Promise.resolve(l.value).then(f,a);h((e=e.apply(r,t)).next())});var _=require("cheerio-without-node-native"),K="1b3113663c9004682ed61086cf967c44",X="https://api.themoviedb.org/3",N="https://1tamilblasters.bz",A={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0",Referer:`${N}/`,Accept:"*/*","Accept-Language":"en-US,en;q=0.9","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"};function M(o){return $(this,arguments,function*(r,t={},e=1e4){let i=new AbortController,f=setTimeout(()=>i.abort(),e);try{let a=yield fetch(r,v(I({},t),{signal:i.signal}));return clearTimeout(f),a}catch(a){throw clearTimeout(f),a}})}function G(e){return $(this,arguments,function*(r,t={}){try{let o=yield M(r,{method:"GET",headers:t},5e3);return o.ok||o.status===206}catch(o){return!1}})}function Q(r){try{return typeof atob!="undefined"?atob(r.trim()):Buffer.from(r.trim(),"base64").toString("binary")}catch(t){return null}}function J(r,t,e,o){for(;e--;)o[e]&&(r=r.replace(new RegExp("\\b"+e.toString(t)+"\\b","g"),o[e]));return r}function Z(r){return(r||"").toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim()}function U(r,t){let e=Z(r),o=Z(t);if(e===o)return 1;if(e.includes(o)||o.includes(e))return .9;let i=new Set(e.split(/\s+/).filter(l=>l.length>2)),f=new Set(o.split(/\s+/).filter(l=>l.length>2));if(i.size===0||f.size===0)return 0;let a=new Set([...i].filter(l=>f.has(l))),h=new Set([...i,...f]);return a.size/h.size}function V(r,t){let{title:e,year:o}=r,{quality:i,type:f,size:a,language:h,seasonCode:l,episodeCode:u,label:g,audioInfo:s}=t,n=o||t.matchYear,c=n?` (${n})`:"",p=!!(l||u),m=`\u{1F4FC}: ${e}${c}`;p?(m+=` - ${l||"S01"} ${u||""}`,g&&!g.toLowerCase().includes("stream")&&!g.includes(u)&&(m+=` (${g})`)):g&&!g.toLowerCase().includes("stream")&&(m+=` (${g})`),m+=` - ${i!=="Unknown"?i:""}`;let x=f&&f!=="UNKNOWN"?`\u{1F4FA}: ${f}
`:"",k=a&&a!=="UNKNOWN"?`\u{1F4BE}: ${a} | \u{1F69C}: tamilblasters-bz
`:"",R=h||"TAMIL";return s&&(R=s),`Tamilblasters BZ (Instant) (${i})
${x}${m}
${k}\u{1F310}: ${R.toUpperCase()}`}var W=class{static extract(t,e=0){return $(this,null,function*(){if(e>2)return null;try{let i=yield(yield M(t,{headers:v(I({},A),{Referer:N})},5e3)).text(),f=new URL(t).origin,a=i.match(new RegExp("eval\\(function\\(p,a,c,k,e,d\\)\\{.*?\\}\\s*\\((.*)\\)\\s*\\)","s"));if(a){let s=a[1].trim().match(new RegExp("^'(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"));s&&(i+=`
`+J(s[1],parseInt(s[2]),parseInt(s[3]),s[4].split("|")))}let h=[/["']hls[2-4]["']\s*:\s*["']([^"']+)["']/gi,/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/gi,/https?:\/\/[^\s"']+\.m3u8[^\s"']*/gi,/["'](\/[^\s"']+\.m3u8[^\s"']*)["']/gi,/["']?file["']?\s*:\s*["']([^"']+)["']/gi],l=[];for(let s of h){let n=i.match(s);n&&n.forEach(c=>{let p=c.replace(/^.*?["']/,"").replace(/["'].*$/,"");p.startsWith("/")&&!p.startsWith("//")&&(p=f+p),(p.includes(".m3u8")||p.includes(".mp4"))&&l.push(p)})}let u=i.match(/[A-Za-z0-9+/]{24,}=*/g);if(u&&u.forEach(s=>{let n=Q(s);n&&(n.includes(".m3u8")||n.startsWith("http"))&&l.push(n)}),l.length>0){l.sort((n,c)=>(c.includes("?")?1:0)-(n.includes("?")?1:0)||c.length-n.length);let s=l[0];return console.log(`[Tamilblasters-BZ] Winner Discovered: ${s}`),yield this.resolveManifest(s,t)}let g=i.matchAll(/href\s*=\s*["'](https?:\/\/[^"']*\/(?:stream|file|d|v|e)\/[^"']+)["']/gi);for(let s of g){console.log(`[Tamilblasters-BZ] Following Discovery Jump: ${s[1]}`);let n=yield this.extract(s[1],e+1);if(n)return n}return null}catch(o){return null}})}static resolveManifest(t,e){return $(this,null,function*(){var o;try{let i=new URL(e).origin+"/",a=yield(yield M(t,{headers:v(I({},A),{Referer:i})},5e3)).text(),h=[],l=[],u=new URL(t).search,g=a.matchAll(/#EXT-X-MEDIA:TYPE=AUDIO.*?NAME="([^"]+)"/g);for(let n of g)l.includes(n[1])||l.push(n[1]);let s=a.matchAll(/#EXT-X-STREAM-INF:.*?RESOLUTION=\d+x(\d+).*?\n(.*)/gi);for(let n of s){let c=n[2].trim();c.startsWith("http")||(c=t.substring(0,t.lastIndexOf("/")+1)+c),u&&!c.includes("?")&&(c+=u),h.push({url:c,quality:this.heightToQuality(n[1])})}return{url:(h.length>0,t),quality:h.length>0?h[0].quality:((o=a.match(/\b(2160|1080|720|480)p?\b/i))==null?void 0:o[0])||"Unknown",audios:l,referer:i,origin:new URL(i).origin}}catch(i){return null}})}static heightToQuality(t){return t=parseInt(t),t>=2160?"4K":t>=1080?"1080p":t>=720?"720p":t>=480?"480p":t+"p"}};function C(r){return $(this,null,function*(){let t=`${N}/index.php?/search/&q=${encodeURIComponent(r)}`;console.log(`[Tamilblasters-BZ] Searching: ${t}`);try{let o=yield(yield M(t,{headers:A},8e3)).text(),i=_.load(o),f=[];return i("h2.ipsStreamItem_title a").each((a,h)=>{let l=i(h).text().trim(),u=i(h).attr("href");l&&u&&f.push({title:l,href:u})}),f.length===0&&i("a[data-linktype='topic']").each((a,h)=>{let l=i(h).text().trim(),u=i(h).attr("href");l&&u&&f.push({title:l,href:u})}),f}catch(e){return console.error(`[Tamilblasters-BZ] Search error: ${e.message}`),[]}})}function q(r,t="movie",e=null,o=null){return $(this,null,function*(){let i=t==="tv"||t==="tvshow"?"tv":"movie",f=/^\d+$/.test(String(r));console.log(`[Tamilblasters-BZ] \u{1F680} Starting High-Speed Fetch for ${i}: ${r}`);try{let a={title:String(r),year:null};if(f){let s=0;for(;s<3;)try{let n=yield M(`${X}/${i}/${r}?api_key=${K}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);let c=yield n.json();a={title:c.title||c.name,year:(c.release_date||c.first_air_date||"").split("-")[0]},console.log(`[Tamilblasters-BZ] TMDB Resolved: ${a.title} (${a.year})`);break}catch(n){s++,console.log(`[Tamilblasters-BZ] TMDB Attempt ${s} failed: ${n.message}`),s<3&&(yield new Promise(c=>setTimeout(c,1e3)))}}let h=yield C(a.title);h.length===0&&f&&(h=yield C(r));let l=h.filter(s=>{let n=U(a.title,s.title),c=!a.year||i==="tv"||s.title.includes(a.year)||s.title.includes(String(parseInt(a.year)+1))||s.title.includes(String(parseInt(a.year)-1));return n>.4&&c}).sort((s,n)=>{let c=s.title.toLowerCase().includes("watch online")?1:0,p=n.title.toLowerCase().includes("watch online")?1:0;return c!==p?p-c:U(a.title,n.title)-U(a.title,s.title)}).slice(0,5);if(l.length===0)return[];let u=[],g=10;for(let s of l){if(u.length>=g)break;try{let c=yield(yield M(s.href,{headers:A})).text(),p=_.load(c),m=p("h1.ipsType_pageTitle").text().trim()||s.title,x=(m+" "+s.title).match(/\(?(\d{4})\)?/),k=x?x[1]:a.year||"N/A",R=[];p("iframe").each((w,B)=>{let T=p(B).attr("src");if(!T||T.includes("google")||T.includes("youtube"))return;let y=`Stream ${w+1}`,b=p(B);for(let d=0;d<5;d++){let E=b.prev();if(E.length===0){if(b=b.parent(),!b.length||b.is("body"))break;continue}let L=E.text().trim();if(L.toLowerCase().includes("episode")||L.match(/EP\d+/i)||L.match(/\(\d+-\d+\)/)||L.toLowerCase().includes("stream")){y=L.replace(/[\r\n]+/g," ").trim();break}b=E}if(y.toLowerCase().includes("episode")){let d=y.match(/Episode\s*[–-ー]\s*(\d+)/i)||y.match(/Episode\s*(\d+)/i)||y.match(/EP\s*(\d+)/i);d&&(y=`EP${d[1]}`)}R.push({url:T,label:y})}),yield Promise.all(R.map(w=>$(this,null,function*(){var P;if(u.length>=g)return;let B=w.label.match(/S(\d+)/i)||w.label.match(/Season\s*(\d+)/i),T=w.label.match(/E(\d+)/i)||w.label.match(/Episode\s*(\d+)/i)||w.label.match(/EP\s*(\d+)/i)||w.label.match(/–\s*(\d+)/),y=B?parseInt(B[1]):null,b=T?parseInt(T[1]):null;if(y===null){let S=(m+" "+s.title).match(/S(\d+)/i)||(m+" "+s.title).match(/Season\s*(\d+)/i);S&&(y=parseInt(S[1]))}if(b===null){let S=(m+" "+s.title).match(/E(\d+)/i)||(m+" "+s.title).match(/Episode\s*(\d+)/i)||(m+" "+s.title).match(/EP\s*(\d+)/i);S&&(b=parseInt(S[1]))}if(i==="tv"){if(e!==null&&y!==null&&y!==e)return;if(o!==null&&b!==null&&b!==o){let S=w.label.match(/(\d+)-(\d+)/)||m.match(/(\d+)-(\d+)/);if(S){if(o<parseInt(S[1])||o>parseInt(S[2]))return}else return}}let d=yield W.extract(w.url);if(!d)return;let E=v(I({},A),{Referer:d.referer||w.url,Origin:d.origin||new URL(w.url).origin});if(yield G(d.url,E)){let S={title:a.title,quality:d.quality,type:m.toUpperCase().includes("BLURAY")?"BluRay":m.toUpperCase().includes("WEB-DL")?"WEB-DL":m.toUpperCase().includes("WEBRIP")?"WEBRip":"HDRip",size:(((P=m.match(/(\d+\.?\d*\s*[mMgG][bB])/))==null?void 0:P[1])||"UNKNOWN").toUpperCase(),language:d.audios.join(" / ")||"TAMIL",seasonCode:y?`S${y.toString().padStart(2,"0")}`:e?`S${e.toString().padStart(2,"0")}`:null,episodeCode:b?`E${b.toString().padStart(2,"0")}`:o?`E${o.toString().padStart(2,"0")}`:null,label:w.label,audioInfo:d.audios.length>0?d.audios.join(", "):"",matchYear:k};u.push({name:"Tamilblasters BZ",title:V(a,S),url:d.url,quality:d.quality,headers:E,provider:"tamilblastersbz"})}})))}catch(n){console.error(`[Tamilblasters-BZ] Error processing match: ${n.message}`)}}return console.log(`[Tamilblasters-BZ] Returning ${u.length} streams`),u}catch(a){return console.error(`[Tamilblasters-BZ] Fatal Error: ${a.message}`),[]}})}typeof module!="undefined"&&module.exports?module.exports={search:C,getStreams:q}:global.getStreams={search:C,getStreams:q};
