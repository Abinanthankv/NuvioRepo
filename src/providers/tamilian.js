/**
 * tamilian - Built from src/tamilian/
 * Generated: 2026-01-18T04:10:37.589Z
 */
var E=Object.defineProperty,L=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var w=(e,r,o)=>r in e?E(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,f=(e,r)=>{for(var o in r||(r={}))U.call(r,o)&&w(e,o,r[o]);if(T)for(var o of T(r))A.call(r,o)&&w(e,o,r[o]);return e},g=(e,r)=>L(e,R(r));var u=(e,r,o)=>new Promise((l,t)=>{var n=c=>{try{a(o.next(c))}catch(s){t(s)}},i=c=>{try{a(o.throw(c))}catch(s){t(s)}},a=c=>c.done?l(c.value):Promise.resolve(c.value).then(n,i);a((o=o.apply(e,r)).next())});var I=require("cheerio-without-node-native"),b="1b3113663c9004682ed61086cf967c44",v="https://api.themoviedb.org/3",_="https://tamilian.io/",h="https://embedojo.net",$={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Referer:`${_}/`};function M(l){return u(this,arguments,function*(e,r={},o=1e4){let t=new AbortController,n=setTimeout(()=>t.abort(),o);try{let i=yield fetch(e,g(f({},r),{signal:t.signal}));return clearTimeout(n),i}catch(i){throw clearTimeout(n),i}})}function j(e,r,o,l){let t=(n,i)=>{if(i<=36)return n.toString(i);let a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c="";do c=a[n%i]+c,n=Math.floor(n/i);while(n>0);return c};for(;o--;)if(l[o]){let n=t(o,r);e=e.replace(new RegExp("\\b"+n+"\\b","g"),l[o])}return e}function q(e,r){let{title:o,year:l}=e,{quality:t,label:n}=r,i=l?` (${l})`:"",a=`\u{1F4FC}: ${o}${i}`;return`Tamilian (Direct) (${t})
${a}
\u{1F69C}: tamilian | \u{1F310}: MULTI`}function C(e){return u(this,null,function*(){let r=["tamil","english","hindi","telugu","malayalam","kannada","dubbed"];console.log(`[Tamilian] Attempting direct Embedojo extraction for TMDB ID: ${e} (Categories: ${r.join(", ")})`);let o=r.map(l=>u(this,null,function*(){try{let t=`${h}/${l}/tmdb/${e}`,n=yield M(t,{headers:$},6e3);if(!n.ok)return null;let i=yield n.text(),a=I.load(i),c=null;if(a("script").each((W,B)=>{let p=a(B).html();if(p&&p.includes("function(p,a,c,k,e,d)"))return c=p,!1}),!c)return null;let s=c.match(new RegExp("return p\\}\\('(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"))||c.match(/return p\}\('(.*)',\s*(\d+),\s*(\d+),\s*'(.*?)'\.split\(/);if(!s)return null;let y=j(s[1],parseInt(s[2]),parseInt(s[3]),s[4].split("|")).match(/FirePlayer\s*\(\s*["']([^"']+)["']/);if(!y)return null;let S=y[1],k=`${h}/player/index.php?data=${S}&do=getVideo`,d=yield(yield M(k,{method:"POST",headers:g(f({},$),{Origin:h,"X-Requested-With":"XMLHttpRequest"})},6e3)).json(),m=d.securedLink||d.videoSource;if(d&&m)return console.log(`[Tamilian] Found video source in category "${l}": ${m}`),{url:m,quality:"1080p",isM3U8:!0,category:l}}catch(t){}return null}));try{let t=(yield Promise.all(o)).find(n=>n!==null);if(t)return t}catch(l){console.error(`[Tamilian] Embedojo Parallel Direct Error: ${l.message}`)}return null})}function O(e,r){return u(this,null,function*(){let l=`${v}/${r==="movie"?"movie":"tv"}/${e}?api_key=${b}`;try{let n=yield(yield fetch(l)).json();if(!n.id)throw new Error("Invalid TMDB ID");let a={title:n.title||n.name,year:(n.release_date||n.first_air_date||"").split("-")[0],tmdbId:n.id,originalLanguage:n.original_language};return console.log(`[Tamilian] TMDB Info: "${a.title}" (${a.year||"N/A"}) [${a.originalLanguage}]`),a}catch(t){throw console.error("[Tamilian] Error fetching TMDB metadata:",t.message),t}})}function P(e,r,o=null){return u(this,null,function*(){let l=r==="movie"?"movie":"tv",t=`${v}/search/${l}?api_key=${b}&query=${encodeURIComponent(e)}`;o&&(t+=`&${l==="movie"?"primary_release_year":"first_air_date_year"}=${o}`);try{let i=yield(yield fetch(t)).json();if(i.results&&i.results.length>0){let a=i.results[0];return console.log(`[Tamilian] Resolved "${e}" to TMDB ID: ${a.id} (${a.title||a.name})`),{title:a.title||a.name,year:(a.release_date||a.first_air_date||"").split("-")[0],tmdbId:a.id,originalLanguage:a.original_language}}return null}catch(n){return console.error(`[Tamilian] TMDB Search failed: ${n.message}`),null}})}function D(e,r="movie",o=null,l=null){return u(this,null,function*(){if(r!=="movie")return console.log(`[Tamilian] Media type is "${r}", but Tamilian only supports Movies.`),[];console.log(`[Tamilian] Processing ${r} ${e}`);try{let t,n=/^\d+$/.test(e),i=null,a=e;if(!n){let s=e.match(/\b(19|20)\d{2}\b/);s&&(i=s[0],a=e.replace(/\b(19|20)\d{2}\b/g,"").trim())}if(n)try{t=yield O(e,r)}catch(s){t={tmdbId:e,title:"Unknown",year:""}}else if(console.log(`[Tamilian] Searching TMDB for: "${a}" ${i?`(${i})`:""}`),t=yield P(a,r,i),!t||!t.tmdbId)return console.log("[Tamilian] TMDB resolution failed or no TMDB ID found. Cannot proceed with direct extraction."),[];let c=[];if(t.tmdbId){let s=yield C(t.tmdbId);s&&c.push({title:`${t.title} (${t.year}) - 1080p`,url:s.url,quality:s.quality,label:"Embedojo Direct"})}return c.map(s=>({name:"Tamilian",title:q(t,s),url:s.url,quality:s.quality||"Unknown",headers:{Referer:_,Origin:"https://embedojo.net","User-Agent":$["User-Agent"]},provider:"Tamilian"}))}catch(t){return console.error("[Tamilian] getStreams failed:",t.message),[]}})}typeof module!="undefined"&&module.exports?module.exports={getStreams:D}:global.getStreams={getStreams:D};
