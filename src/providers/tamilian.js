/**
 * tamilian - Built from src/tamilian/
 * Generated: 2026-01-11T08:03:53.004Z
 */
var A=Object.defineProperty,I=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var D=(n,r,t)=>r in n?A(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,g=(n,r)=>{for(var t in r||(r={}))j.call(r,t)&&D(n,t,r[t]);if(w)for(var t of w(r))q.call(r,t)&&D(n,t,r[t]);return n},y=(n,r)=>I(n,U(r));var u=(n,r,t)=>new Promise((c,a)=>{var e=l=>{try{i(t.next(l))}catch(s){a(s)}},o=l=>{try{i(t.throw(l))}catch(s){a(s)}},i=l=>l.done?c(l.value):Promise.resolve(l.value).then(e,o);i((t=t.apply(n,r)).next())});var x=require("cheerio-without-node-native"),v="1b3113663c9004682ed61086cf967c44",k="https://api.themoviedb.org/3",B="https://tamilian.io/",$="https://embedojo.net",T={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Referer:`${B}/`};function b(c){return u(this,arguments,function*(n,r={},t=1e4){let a=new AbortController,e=setTimeout(()=>a.abort(),t);try{let o=yield fetch(n,y(g({},r),{signal:a.signal}));return clearTimeout(e),o}catch(o){throw clearTimeout(e),o}})}function C(n,r,t,c){let a=(e,o)=>{if(o<=36)return e.toString(o);let i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",l="";do l=i[e%o]+l,e=Math.floor(e/o);while(e>0);return l};for(;t--;)if(c[t]){let e=a(t,r);n=n.replace(new RegExp("\\b"+e+"\\b","g"),c[t])}return n}function L(n,r=null){return u(this,null,function*(){let t=["tamil"];if(r&&r!=="ta"){let o={en:"english",hi:"hindi",te:"telugu",ml:"malayalam",kn:"kannada"}[r];o&&!t.includes(o)&&t.push(o)}let c=["english","hindi","telugu"];for(let e of c)t.includes(e)||t.push(e);console.log(`[Tamilian] Attempting direct Embedojo extraction for TMDB ID: ${n} (Categories: ${t.join(", ")})`);let a=t.map(e=>u(this,null,function*(){try{let o=`${$}/${e}/tmdb/${n}`,i=yield b(o,{headers:T},6e3);if(!i.ok)return null;let l=yield i.text(),s=x.load(l),p=null;if(s("script").each((F,R)=>{let h=s(R).html();if(h&&h.includes("function(p,a,c,k,e,d)"))return p=h,!1}),!p)return null;let d=p.match(new RegExp("return p\\}\\('(.*)',\\s*(\\d+),\\s*(\\d+),\\s*'(.*?)'\\.split\\(","s"))||p.match(/return p\}\('(.*)',\s*(\d+),\s*(\d+),\s*'(.*?)'\.split\(/);if(!d)return null;let M=C(d[1],parseInt(d[2]),parseInt(d[3]),d[4].split("|")).match(/FirePlayer\s*\(\s*["']([^"']+)["']/);if(!M)return null;let S=M[1],E=`${$}/player/index.php?data=${S}&do=getVideo`,m=yield(yield b(E,{method:"POST",headers:y(g({},T),{Origin:$,"X-Requested-With":"XMLHttpRequest"})},6e3)).json(),f=m.securedLink||m.videoSource;if(m&&f)return console.log(`[Tamilian] Found video source in category "${e}": ${f}`),{url:f,quality:"1080p",isM3U8:!0,category:e}}catch(o){}return null}));try{let o=(yield Promise.all(a)).find(i=>i!==null);if(o)return o}catch(e){console.error(`[Tamilian] Embedojo Parallel Direct Error: ${e.message}`)}return null})}function O(n,r){return u(this,null,function*(){let c=`${k}/${r==="movie"?"movie":"tv"}/${n}?api_key=${v}`;try{let e=yield(yield fetch(c)).json();if(!e.id)throw new Error("Invalid TMDB ID");let i={title:e.title||e.name,year:(e.release_date||e.first_air_date||"").split("-")[0],tmdbId:e.id,originalLanguage:e.original_language};return console.log(`[Tamilian] TMDB Info: "${i.title}" (${i.year||"N/A"}) [${i.originalLanguage}]`),i}catch(a){throw console.error("[Tamilian] Error fetching TMDB metadata:",a.message),a}})}function P(n,r,t=null){return u(this,null,function*(){let c=r==="movie"?"movie":"tv",a=`${k}/search/${c}?api_key=${v}&query=${encodeURIComponent(n)}`;t&&(a+=`&${c==="movie"?"primary_release_year":"first_air_date_year"}=${t}`);try{let o=yield(yield fetch(a)).json();if(o.results&&o.results.length>0){let i=o.results[0];return console.log(`[Tamilian] Resolved "${n}" to TMDB ID: ${i.id} (${i.title||i.name})`),{title:i.title||i.name,year:(i.release_date||i.first_air_date||"").split("-")[0],tmdbId:i.id,originalLanguage:i.original_language}}return null}catch(e){return console.error(`[Tamilian] TMDB Search failed: ${e.message}`),null}})}function _(n,r="movie",t=null,c=null){return u(this,null,function*(){if(r!=="movie")return console.log(`[Tamilian] Media type is "${r}", but Tamilian only supports Movies.`),[];console.log(`[Tamilian] Processing ${r} ${n}`);try{let a,e=/^\d+$/.test(n),o=null,i=n;if(!e){let s=n.match(/\b(19|20)\d{2}\b/);s&&(o=s[0],i=n.replace(/\b(19|20)\d{2}\b/g,"").trim())}if(e)try{a=yield O(n,r)}catch(s){a={tmdbId:n,title:"Unknown",year:""}}else if(console.log(`[Tamilian] Searching TMDB for: "${i}" ${o?`(${o})`:""}`),a=yield P(i,r,o),!a||!a.tmdbId)return console.log("[Tamilian] TMDB resolution failed or no TMDB ID found. Cannot proceed with direct extraction."),[];let l=[];if(a.tmdbId){let s=yield L(a.tmdbId,a.originalLanguage);s&&l.push({title:`${a.title} (${a.year}) - 1080p`,url:s.url,quality:s.quality,label:"Embedojo Direct"})}return l.map(s=>({name:"Tamilian",title:s.title,url:s.url,quality:s.quality||"Unknown",headers:{Referer:B,Origin:"https://embedojo.net","User-Agent":T["User-Agent"]},provider:"Tamilian"}))}catch(a){return console.error("[Tamilian] getStreams failed:",a.message),[]}})}typeof module!="undefined"&&module.exports?module.exports={getStreams:_}:global.getStreams={getStreams:_};
